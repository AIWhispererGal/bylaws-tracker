
> bylaws-amendment-tracker@1.0.0 test
> jest

PASS tests/unit/user-management.test.js (5.81 s)
  User Management Tests
    User Creation
      ✓ should create new user successfully (44 ms)
      ✓ should handle user creation errors
      ✓ should include user metadata
    Organization Membership
      ✓ should add user to organization (1 ms)
      ✓ should add user with specific role (1 ms)
      ✓ should handle duplicate membership errors (1 ms)
      ✓ should set is_active to true by default (1 ms)
    Role Management
      ✓ should update user role
      ✓ should validate role names (1 ms)
      ✓ should check role hierarchy permissions (1 ms)
      ✓ should prevent unauthorized role changes
      ✓ should allow equal or lower role management (1 ms)
    User Removal
      ✓ should remove user from organization (1 ms)
      ✓ should soft delete by setting is_active to false
      ✓ should handle removal errors (1 ms)
    User Queries
      ✓ should get all users for organization (1 ms)
      ✓ should get user organizations
      ✓ should return empty array for users with no organizations
      ✓ should filter out inactive memberships
    Permission Checks
      ✓ should validate admin can manage members
      ✓ should validate committee chair can manage members
      ✓ should prevent members from managing admins (5 ms)
      ✓ should validate global admin can manage all roles (1 ms)
    Edge Cases
      ✓ should handle null user IDs (1 ms)
      ✓ should handle null organization IDs
      ✓ should handle concurrent role updates

FAIL tests/unit/multitenancy.test.js (6.301 s)
  Multi-Tenancy Tests
    Organization Isolation
      ✕ should isolate data between organizations (40 ms)
      ✕ should prevent cross-organization data access (1 ms)
      ✓ should maintain organization_id on all records (1 ms)
    Concurrent Organization Usage
      ✕ should handle multiple organizations simultaneously
      ✕ should prevent data leaks during concurrent operations (1 ms)
    Organization-Specific Configuration
      ✓ should support different workflows per organization (1 ms)
      ✓ should support organization-specific hierarchy (1 ms)
    Data Migration Safety
      ✓ should preserve organization_id during migrations (1 ms)
      ✓ should maintain referential integrity (1 ms)
    Scalability Tests
      ✓ should handle many organizations efficiently (1 ms)
      ✓ should efficiently query organization-specific data (1 ms)
    Security Policies
      ✕ should enforce row-level security
      ✕ should prevent unauthorized data modification

  ● Multi-Tenancy Tests › Organization Isolation › should isolate data between organizations

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 2
    Received array:  [{"created_at": 2025-10-14T00:10:51.636Z, "id": "sec-1760400651636", "organization_id": "org-1760400651636", "title": "Org 1 Section"}, {"created_at": 2025-10-14T00:10:51.636Z, "id": "sec-1760400651636", "organization_id": "org-1760400651636", "title": "Org 2 Section"}]

      93 |       const org2Sections = await db.getSectionsByOrg(org2.id);
      94 |
    > 95 |       expect(org1Sections).toHaveLength(1);
         |                            ^
      96 |       expect(org2Sections).toHaveLength(1);
      97 |       expect(org1Sections[0].title).toBe('Org 1 Section');
      98 |       expect(org2Sections[0].title).toBe('Org 2 Section');

      at Object.toHaveLength (tests/unit/multitenancy.test.js:95:28)

  ● Multi-Tenancy Tests › Organization Isolation › should prevent cross-organization data access

    expect(received).toHaveLength(expected)

    Expected length: 0
    Received length: 1
    Received array:  [{"created_at": 2025-10-14T00:10:51.649Z, "id": "sec-1760400651649", "organization_id": "org-1760400651649", "title": "Secret Section"}]

      107 |       const result = await db.crossOrgQuery(org1.id, org2.id);
      108 |
    > 109 |       expect(result.org1).toHaveLength(0);
          |                           ^
      110 |       expect(result.org2).toHaveLength(0); // RLS prevents access
      111 |     });
      112 |

      at Object.toHaveLength (tests/unit/multitenancy.test.js:109:27)

  ● Multi-Tenancy Tests › Concurrent Organization Usage › should handle multiple organizations simultaneously

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 3
    Received array:  [{"created_at": 2025-10-14T00:10:51.651Z, "id": "sec-1760400651651", "organization_id": "org-1760400651651", "title": "Org A Section"}, {"created_at": 2025-10-14T00:10:51.651Z, "id": "sec-1760400651651", "organization_id": "org-1760400651651", "title": "Org B Section"}, {"created_at": 2025-10-14T00:10:51.651Z, "id": "sec-1760400651651", "organization_id": "org-1760400651651", "title": "Org C Section"}]

      137 |       for (const org of orgs) {
      138 |         const sections = await db.getSectionsByOrg(org.id);
    > 139 |         expect(sections).toHaveLength(1);
          |                          ^
      140 |         expect(sections[0].title).toContain(org.name);
      141 |       }
      142 |     });

      at Object.toHaveLength (tests/unit/multitenancy.test.js:139:26)

  ● Multi-Tenancy Tests › Concurrent Organization Usage › should prevent data leaks during concurrent operations

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 4
    Received array:  [{"created_at": 2025-10-14T00:10:51.652Z, "id": "sec-1760400651652", "organization_id": "org-1760400651652", "title": "Section 1"}, {"created_at": 2025-10-14T00:10:51.652Z, "id": "sec-1760400651652", "organization_id": "org-1760400651652", "title": "Section 2"}, {"created_at": 2025-10-14T00:10:51.652Z, "id": "sec-1760400651652", "organization_id": "org-1760400651652", "title": "Section A"}, {"created_at": 2025-10-14T00:10:51.652Z, "id": "sec-1760400651652", "organization_id": "org-1760400651652", "title": "Section B"}]

      157 |       const org2Sections = await db.getSectionsByOrg(org2.id);
      158 |
    > 159 |       expect(org1Sections).toHaveLength(2);
          |                            ^
      160 |       expect(org2Sections).toHaveLength(2);
      161 |
      162 |       // Verify no cross-contamination

      at Object.toHaveLength (tests/unit/multitenancy.test.js:159:28)

  ● Multi-Tenancy Tests › Security Policies › should enforce row-level security

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 2
    Received array:  [{"created_at": 2025-10-14T00:10:51.659Z, "id": "sec-1760400651659", "organization_id": "org-1760400651659", "title": "Public Section"}, {"created_at": 2025-10-14T00:10:51.659Z, "id": "sec-1760400651659", "organization_id": "org-1760400651659", "title": "Private Section"}]

      289 |       const visibleSections = await db.getSectionsByOrg(org1.id);
      290 |
    > 291 |       expect(visibleSections).toHaveLength(1);
          |                               ^
      292 |       expect(visibleSections[0].title).toBe('Public Section');
      293 |     });
      294 |

      at Object.toHaveLength (tests/unit/multitenancy.test.js:291:31)

  ● Multi-Tenancy Tests › Security Policies › should prevent unauthorized data modification

    expect(received).not.toContain(expected) // indexOf

    Expected value: not {"created_at": 2025-10-14T00:10:51.660Z, "id": "sec-1760400651660", "organization_id": "org-1760400651660", "title": "Locked Section"}
    Received array:     [{"created_at": 2025-10-14T00:10:51.660Z, "id": "sec-1760400651660", "organization_id": "org-1760400651660", "title": "Locked Section"}]

      302 |       const org1Sections = await db.getSectionsByOrg(org1.id);
      303 |
    > 304 |       expect(org1Sections).not.toContain(section);
          |                                ^
      305 |     });
      306 |   });
      307 | });

      at Object.toContain (tests/unit/multitenancy.test.js:304:32)

PASS tests/integration/approval-workflow-integration.test.js (6.709 s)
  Approval Workflow Integration Tests
    Complete Workflow Progression
      ✓ should complete full approval workflow (42 ms)
      ✓ should handle rejection workflow (1 ms)
      ✓ should track approval history (1 ms)
    Multi-Section Approval Workflow
      ✓ should approve multiple sections together (1 ms)
      ✓ should fail if any section in group is already locked (1 ms)
      ✓ should unlock multiple sections atomically
    Section Lock Management
      ✓ should create section lock with metadata (1 ms)
      ✓ should retrieve lock information (1 ms)
      ✓ should query locked sections for document (1 ms)
    Approval State Validation
      ✓ should validate state transitions before applying (1 ms)
      ✓ should prevent editing locked sections
      ✓ should allow editing draft and review sections
    Suggestion and Section Linking
      ✓ should link suggestion to locked sections (1 ms)
      ✓ should update section text from approved suggestion
    Error Handling and Rollback
      ✓ should rollback on failed multi-section lock
      ✓ should handle concurrent approval attempts (5 ms)
      ✓ should validate approval permissions
    Performance and Scalability
      ✓ should handle large batch approvals efficiently (1 ms)
      ✓ should efficiently query approval history (1 ms)

PASS tests/unit/configuration.test.js (6.834 s)
  Configuration System
    Configuration Loading
      ✓ should load configuration from object (39 ms)
      ✓ should provide default values for missing keys (1 ms)
      ✓ should load from environment variables
    Configuration Validation
      ✓ should validate required fields (1 ms)
      ✓ should throw error for missing required fields (130 ms)
      ✓ should validate workflow stages structure (1 ms)
      ✓ should reject invalid workflow stages (1 ms)
      ✓ should enforce stage count limits
    Workflow Configuration
      ✓ should support 1 stage workflow
      ✓ should support 2 stage workflow (committee/board)
      ✓ should support 5 stage workflow (1 ms)
      ✓ should support custom stage names
    Organization-Specific Configuration
      ✓ should configure neighborhood council workflow
      ✓ should configure corporate governance workflow (1 ms)
      ✓ should configure academic policy workflow
    Dynamic Configuration Updates
      ✓ should allow runtime configuration changes (1 ms)
      ✓ should support configuration merging (1 ms)
    Configuration Persistence
      ✓ should serialize configuration to JSON
      ✓ should support configuration versioning
    Hierarchy Configuration
      ✓ should configure custom hierarchy labels
      ✓ should configure numbering schemes

  console.error
    Error counting suggestions: Error: Database error
        at Object.<anonymous> (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/unit/suggestion-count.test.js:190:33)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      22 |       return count || 0;
      23 |     } catch (error) {
    > 24 |       console.error('Error counting suggestions:', error);
         |               ^
      25 |       return 0;
      26 |     }
      27 |   }

      at SuggestionCountService.error [as getSuggestionCount] (tests/unit/suggestion-count.test.js:24:15)
      at Object.<anonymous> (tests/unit/suggestion-count.test.js:194:21)

  console.error
    Error getting suggestion counts for document: Error: Query failed
        at Object.<anonymous> (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/unit/suggestion-count.test.js:261:41)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      64 |       return counts;
      65 |     } catch (error) {
    > 66 |       console.error('Error getting suggestion counts for document:', error);
         |               ^
      67 |       return {};
      68 |     }
      69 |   }

      at SuggestionCountService.error [as getSuggestionCountsForDocument] (tests/unit/suggestion-count.test.js:66:15)
      at Object.<anonymous> (tests/unit/suggestion-count.test.js:265:22)

PASS tests/unit/suggestion-count.test.js (6.922 s)
  Suggestion Count Regression Tests
    Single Section Suggestion Counts
      ✓ should correctly count suggestions for a section (42 ms)
      ✓ should return 0 when no suggestions exist (1 ms)
      ✓ should handle database errors gracefully (1100 ms)
      ✓ should only count open suggestions
    Document-Wide Suggestion Counts
      ✓ should get suggestion counts for all sections in document (2 ms)
      ✓ should return empty object for document with no sections (1 ms)
      ✓ should handle sections with no suggestions (4 ms)
      ✓ should handle database errors in document counts (18 ms)
    Multi-Section Suggestion Counts
      ✓ should categorize exact match suggestions (1 ms)
      ✓ should categorize full coverage suggestions
      ✓ should categorize partial overlap suggestions (1 ms)
      ✓ should handle empty section ID list
      ✓ should handle null section IDs (1 ms)
    Performance Tests
      ✓ should handle large document with many sections efficiently (1 ms)
      ✓ should efficiently query counts for multiple sections
    Regression: Original Bug Fix
      ✓ should not return undefined for sections with no suggestions (1 ms)
      ✓ should initialize all section counts to 0
      ✓ should handle malformed suggestion data

  console.log
    Built hierarchy for 3 sections

      at SectionStorage.log [as buildHierarchy] (src/services/sectionStorage.js:167:13)

  console.log
    Root sections (depth 0): 3

      at SectionStorage.log [as buildHierarchy] (src/services/sectionStorage.js:168:13)

  console.log
    Child sections (depth > 0): 0

      at SectionStorage.log [as buildHierarchy] (src/services/sectionStorage.js:169:13)

  console.log
    Built hierarchy for 5 sections

      at SectionStorage.log [as buildHierarchy] (src/services/sectionStorage.js:167:13)

  console.log
    Root sections (depth 0): 2

      at SectionStorage.log [as buildHierarchy] (src/services/sectionStorage.js:168:13)

  console.log
    Child sections (depth > 0): 3

      at SectionStorage.log [as buildHierarchy] (src/services/sectionStorage.js:169:13)

  console.log
    Built hierarchy for 6 sections

      at SectionStorage.log [as buildHierarchy] (src/services/sectionStorage.js:167:13)

  console.log
    Root sections (depth 0): 1

      at SectionStorage.log [as buildHierarchy] (src/services/sectionStorage.js:168:13)

  console.log
    Child sections (depth > 0): 5

      at SectionStorage.log [as buildHierarchy] (src/services/sectionStorage.js:169:13)

PASS tests/sectionStorage.test.js (7.072 s)
  SectionStorage
    buildHierarchy
      ✓ should build flat hierarchy for depth 0 sections (1085 ms)
      ✓ should build parent-child relationships for nested sections (9 ms)
      ✓ should handle multi-level nesting (4 ms)
    formatSectionNumber
      ✓ should use section_number if available (1 ms)
      ✓ should use citation if section_number not available
      ✓ should build from prefix and number
      ✓ should return "Unnumbered" for empty section (1 ms)
    storeSections
      ○ skipped should store sections with hierarchy to database
    validateStoredSections
      ○ skipped should validate section hierarchy integrity
  Integration: Complete workflow
    ○ skipped should store and validate a complete document

FAIL tests/integration/api.test.js (6.548 s)
  API Integration Tests
    Section Management API
      ✓ should fetch all sections for a document (88 ms)
      ✓ should create new section (1 ms)
      ✓ should lock section with suggestion (2 ms)
      ✓ should unlock section (1 ms)
    Multi-Section API
      ✓ should lock multiple sections atomically (1 ms)
      ✕ should fetch suggestions for multiple sections (1 ms)
    Suggestion Management API
      ✓ should create single-section suggestion
      ✓ should create multi-section suggestion (1 ms)
      ✓ should update suggestion (1 ms)
      ✓ should delete suggestion (1 ms)
      ✓ should get suggestions for a section
    Export API
      ✓ should export committee selections (1 ms)
      ✓ should export board approvals (6 ms)
    Document Initialization API
      ✓ should initialize document with sections
    Error Handling
      ✓ should handle invalid section ID gracefully (1 ms)
      ✓ should validate multi-section requests (1 ms)
      ✓ should prevent locking already locked sections (1 ms)
    Workflow Integration
      ✓ should complete full amendment workflow (1 ms)

  ● API Integration Tests › Multi-Section API › should fetch suggestions for multiple sections

    TypeError: Cannot read properties of undefined (reading 'full_coverage')

      152 |
      153 |       expect(response.data.success).toBe(true);
    > 154 |       expect(response.data.suggestions.full_coverage).toHaveLength(1);
          |                                        ^
      155 |     });
      156 |   });
      157 |

      at Object.full_coverage (tests/integration/api.test.js:154:40)

PASS tests/security/rls-policies.test.js (7.135 s)
  RLS Policy Tests
    Organization Isolation
      ✓ should allow user to see only their organization (40 ms)
      ✓ should allow global admin to see all organizations (1 ms)
      ✓ should prevent unauthenticated access to organizations
    Document Isolation
      ✓ should isolate documents by organization
      ✓ should prevent cross-organization document access
      ✓ should allow global admin to access all documents (1 ms)
    Section Isolation
      ✓ should isolate sections by organization (1 ms)
      ✓ should prevent unauthorized section modifications (1 ms)
    Suggestion Isolation
      ✓ should isolate suggestions by organization (1 ms)
      ✓ should prevent cross-organization suggestion access (1 ms)
    User Membership Policies
      ✓ should allow users to see their own memberships (1 ms)
      ✓ should prevent users from seeing other users memberships (1 ms)
      ✓ should allow global admin to see all memberships
    Section Lock Policies
      ✓ should isolate section locks by organization (1 ms)
    Permission Boundary Tests
      ✓ should enforce strict organization boundaries (1 ms)
      ✓ should prevent privilege escalation attempts
      ✓ should validate organization context for all operations (6 ms)
    Global Admin Override
      ✓ should allow global admin to bypass all organization restrictions (1 ms)
      ✓ should differentiate between global admin and org admin
    Security Edge Cases
      ✓ should handle null organization_id (1 ms)
      ✓ should handle undefined organization_id
      ✓ should require authentication for all operations (1 ms)
      ✓ should handle concurrent multi-tenant queries

FAIL tests/integration/dashboard-flow.test.js (7.542 s)
  Multi-Tenancy Tests
    Organization Isolation
      ✕ should isolate data between organizations (66 ms)
      ✕ should prevent cross-organization data access (1 ms)
      ✓ should maintain organization_id on all records (1 ms)
    Concurrent Organization Usage
      ✕ should handle multiple organizations simultaneously (1 ms)
      ✕ should prevent data leaks during concurrent operations (1 ms)
    Organization-Specific Configuration
      ✓ should support different workflows per organization (1 ms)
      ✓ should support organization-specific hierarchy (1 ms)
    Data Migration Safety
      ✓ should preserve organization_id during migrations
      ✓ should maintain referential integrity (1 ms)
    Scalability Tests
      ✓ should handle many organizations efficiently
      ✓ should efficiently query organization-specific data
    Security Policies
      ✕ should enforce row-level security
      ✕ should prevent unauthorized data modification
  Dashboard Flow Integration Tests
    Complete Setup to Dashboard Flow
      ✓ should complete full onboarding workflow (1 ms)
      ✓ should redirect to setup if organization not configured (1 ms)
      ✓ should persist session across requests
    Authentication and Session Management
      ✓ should require authentication for dashboard
      ✓ should associate user with organization (1 ms)
      ✓ should handle session timeout gracefully
      ✓ should refresh session on activity
    Multi-Tenant Data Isolation
      ✕ should isolate data between concurrent users (1 ms)
      ✓ should prevent cross-organization data access
      ✓ should handle organization switching
    Dashboard API Endpoints
      ✕ should fetch sections with organization filter (1 ms)
      ✓ should create suggestion with organization context (1 ms)
      ✓ should fetch suggestions with organization filter
      ✓ should handle empty organization data gracefully
    Dashboard Navigation
      ✓ should navigate from setup to dashboard
      ✓ should redirect to setup from dashboard if not configured
      ✓ should allow direct dashboard access if configured (1 ms)
    Error Recovery
      ✕ should recover from database connection loss (1 ms)
      ✓ should handle partial data load failures
      ✓ should maintain data consistency on concurrent updates (1 ms)
    Performance and Scalability
      ✓ should handle large number of sections efficiently
      ✓ should paginate large result sets (1 ms)
      ✕ should cache frequently accessed data

  ● Multi-Tenancy Tests › Organization Isolation › should isolate data between organizations

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 2
    Received array:  [{"created_at": 2025-10-14T00:10:52.467Z, "id": "sec-1760400652467", "organization_id": "org-1760400652467", "title": "Org 1 Section"}, {"created_at": 2025-10-14T00:10:52.467Z, "id": "sec-1760400652467", "organization_id": "org-1760400652467", "title": "Org 2 Section"}]

      93 |       const org2Sections = await db.getSectionsByOrg(org2.id);
      94 |
    > 95 |       expect(org1Sections).toHaveLength(1);
         |                            ^
      96 |       expect(org2Sections).toHaveLength(1);
      97 |       expect(org1Sections[0].title).toBe('Org 1 Section');
      98 |       expect(org2Sections[0].title).toBe('Org 2 Section');

      at Object.toHaveLength (tests/unit/multitenancy.test.js:95:28)

  ● Multi-Tenancy Tests › Organization Isolation › should prevent cross-organization data access

    expect(received).toHaveLength(expected)

    Expected length: 0
    Received length: 1
    Received array:  [{"created_at": 2025-10-14T00:10:52.479Z, "id": "sec-1760400652479", "organization_id": "org-1760400652479", "title": "Secret Section"}]

      107 |       const result = await db.crossOrgQuery(org1.id, org2.id);
      108 |
    > 109 |       expect(result.org1).toHaveLength(0);
          |                           ^
      110 |       expect(result.org2).toHaveLength(0); // RLS prevents access
      111 |     });
      112 |

      at Object.toHaveLength (tests/unit/multitenancy.test.js:109:27)

  ● Multi-Tenancy Tests › Concurrent Organization Usage › should handle multiple organizations simultaneously

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 3
    Received array:  [{"created_at": 2025-10-14T00:10:52.480Z, "id": "sec-1760400652480", "organization_id": "org-1760400652480", "title": "Org A Section"}, {"created_at": 2025-10-14T00:10:52.480Z, "id": "sec-1760400652480", "organization_id": "org-1760400652480", "title": "Org B Section"}, {"created_at": 2025-10-14T00:10:52.480Z, "id": "sec-1760400652480", "organization_id": "org-1760400652480", "title": "Org C Section"}]

      137 |       for (const org of orgs) {
      138 |         const sections = await db.getSectionsByOrg(org.id);
    > 139 |         expect(sections).toHaveLength(1);
          |                          ^
      140 |         expect(sections[0].title).toContain(org.name);
      141 |       }
      142 |     });

      at Object.toHaveLength (tests/unit/multitenancy.test.js:139:26)

  ● Multi-Tenancy Tests › Concurrent Organization Usage › should prevent data leaks during concurrent operations

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 4
    Received array:  [{"created_at": 2025-10-14T00:10:52.481Z, "id": "sec-1760400652481", "organization_id": "org-1760400652481", "title": "Section 1"}, {"created_at": 2025-10-14T00:10:52.481Z, "id": "sec-1760400652481", "organization_id": "org-1760400652481", "title": "Section 2"}, {"created_at": 2025-10-14T00:10:52.481Z, "id": "sec-1760400652481", "organization_id": "org-1760400652481", "title": "Section A"}, {"created_at": 2025-10-14T00:10:52.481Z, "id": "sec-1760400652481", "organization_id": "org-1760400652481", "title": "Section B"}]

      157 |       const org2Sections = await db.getSectionsByOrg(org2.id);
      158 |
    > 159 |       expect(org1Sections).toHaveLength(2);
          |                            ^
      160 |       expect(org2Sections).toHaveLength(2);
      161 |
      162 |       // Verify no cross-contamination

      at Object.toHaveLength (tests/unit/multitenancy.test.js:159:28)

  ● Multi-Tenancy Tests › Security Policies › should enforce row-level security

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 2
    Received array:  [{"created_at": 2025-10-14T00:10:52.492Z, "id": "sec-1760400652492", "organization_id": "org-1760400652492", "title": "Public Section"}, {"created_at": 2025-10-14T00:10:52.492Z, "id": "sec-1760400652492", "organization_id": "org-1760400652492", "title": "Private Section"}]

      289 |       const visibleSections = await db.getSectionsByOrg(org1.id);
      290 |
    > 291 |       expect(visibleSections).toHaveLength(1);
          |                               ^
      292 |       expect(visibleSections[0].title).toBe('Public Section');
      293 |     });
      294 |

      at Object.toHaveLength (tests/unit/multitenancy.test.js:291:31)

  ● Multi-Tenancy Tests › Security Policies › should prevent unauthorized data modification

    expect(received).not.toContain(expected) // indexOf

    Expected value: not {"created_at": 2025-10-14T00:10:52.493Z, "id": "sec-1760400652493", "organization_id": "org-1760400652493", "title": "Locked Section"}
    Received array:     [{"created_at": 2025-10-14T00:10:52.493Z, "id": "sec-1760400652493", "organization_id": "org-1760400652493", "title": "Locked Section"}]

      302 |       const org1Sections = await db.getSectionsByOrg(org1.id);
      303 |
    > 304 |       expect(org1Sections).not.toContain(section);
          |                                ^
      305 |     });
      306 |   });
      307 | });

      at Object.toContain (tests/unit/multitenancy.test.js:304:32)

  ● Dashboard Flow Integration Tests › Multi-Tenant Data Isolation › should isolate data between concurrent users

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 2
    Received array:  [{"created_at": 2025-10-14T00:10:52.498Z, "id": "sec-1760400652498", "organization_id": "org-1760400652498", "section_title": "Org 1 Section"}, {"created_at": 2025-10-14T00:10:52.498Z, "id": "sec-1760400652498", "organization_id": "org-1760400652498", "section_title": "Org 2 Section"}]

      185 |       const org2Sections = await db.getSectionsByOrg(session2.organizationId);
      186 |
    > 187 |       expect(org1Sections).toHaveLength(1);
          |                            ^
      188 |       expect(org2Sections).toHaveLength(1);
      189 |       expect(org1Sections[0].section_title).toBe('Org 1 Section');
      190 |       expect(org2Sections[0].section_title).toBe('Org 2 Section');

      at Object.toHaveLength (tests/integration/dashboard-flow.test.js:187:28)

  ● Dashboard Flow Integration Tests › Dashboard API Endpoints › should fetch sections with organization filter

    TypeError: expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has value: undefined

      246 |
      247 |       expect(response.success).toBe(true);
    > 248 |       expect(response.sections).toHaveLength(2);
          |                                 ^
      249 |     });
      250 |
      251 |     test('should create suggestion with organization context', async () => {

      at Object.toHaveLength (tests/integration/dashboard-flow.test.js:248:33)

  ● Dashboard Flow Integration Tests › Error Recovery › should recover from database connection loss

    expect(received).toEqual(expected) // deep equality

    Expected: []
    Received: undefined

      365 |       const sections = await getSectionsWithRetry(mockSupabase, 'org-123', 1);
      366 |
    > 367 |       expect(sections).toEqual([]);
          |                        ^
      368 |     });
      369 |
      370 |     test('should handle partial data load failures', async () => {

      at Object.toEqual (tests/integration/dashboard-flow.test.js:367:24)

  ● Dashboard Flow Integration Tests › Performance and Scalability › should cache frequently accessed data

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      455 |
      456 |       // Should hit cache
    > 457 |       expect(cache.has('org-123')).toBe(true);
          |                                    ^
      458 |     });
      459 |   });
      460 | });

      at Object.toBe (tests/integration/dashboard-flow.test.js:457:36)

PASS tests/setup/setup-integration.test.js (7.808 s)
  Setup Wizard Integration
    Complete Setup Flow
      ✓ should complete full setup successfully (650 ms)
      ✓ should handle going back and editing (2 ms)
      ✓ should maintain data when moving between steps (2 ms)
    Error Handling
      ✓ should prevent completion before processing (2 ms)
      ✓ should validate required fields at each step (2 ms)
      ✓ should handle database errors gracefully (102 ms)
    Access Control
      ✓ should prevent main app access before setup (1 ms)
      ✓ should allow main app access after setup (603 ms)
    Different Configuration Scenarios
      ✓ should support simple 1-stage workflow (1 ms)
      ✓ should support complex 5-stage workflow
      ✓ should support custom document hierarchy (1 ms)

PASS tests/integration/migration.test.js
  Migration Tests
    Schema Migration
      ✓ should add organization_id to existing tables (1 ms)
      ✓ should create organizations table
    Data Preservation
      ✓ should preserve all existing sections
      ✓ should preserve section text content
      ✓ should migrate to default organization (1 ms)
    Migration Rollback
      ✓ should support rollback functionality
    Version Management
      ✓ should track migration version (1 ms)
      ✓ should run migrations in order
      ✓ should skip already applied migrations (2 ms)
    Data Integrity
      ✓ should maintain referential integrity (1 ms)

  console.log
    
    === Performance Test Summary ===

      at Object.log (tests/performance/dashboard-performance.test.js:620:13)

  console.log
    ================================

      at Object.log (tests/performance/dashboard-performance.test.js:628:13)

FAIL tests/performance/dashboard-performance.test.js (7.419 s)
  Dashboard Performance Tests
    Query Performance
      ✓ should execute simple query under 100ms (42 ms)
      ✓ should query 100 sections under 200ms (1 ms)
      ✓ should query with JOIN under 300ms (1 ms)
      ✓ should use efficient indexes (1 ms)
      ✓ should limit result set size (1 ms)
    Concurrent Access
      ✓ should handle 10 concurrent users
      ✓ should handle 100 concurrent read requests (2 ms)
      ✓ should maintain isolation under concurrent access (1 ms)
      ✓ should handle concurrent writes safely (1 ms)
      ✓ should prevent race conditions (6 ms)
    Large Dataset Handling
      ✓ should handle 1000 sections efficiently (1 ms)
      ✓ should paginate large results (1 ms)
      ✓ should handle large text content
      ✓ should efficiently count large result sets (1 ms)
      ✕ should handle bulk inserts efficiently
    Memory Usage
      ✓ should not leak memory with repeated queries (1 ms)
      ✓ should efficiently handle large objects (4 ms)
      ✓ should clean up resources after operations (1 ms)
    Response Time SLAs
      ✓ should meet P50 response time of <100ms (1 ms)
      ✓ should meet P95 response time of <500ms
      ✓ should meet P99 response time of <1000ms
    Caching Strategy
      ✓ should cache frequently accessed data (1 ms)
      ✓ should invalidate cache on data changes
      ✓ should implement TTL for cached data
    Database Connection Pooling
      ✓ should reuse database connections (1 ms)
      ✓ should handle connection pool exhaustion

  ● Dashboard Performance Tests › Large Dataset Handling › should handle bulk inserts efficiently

    TypeError: mockSupabase.from(...).insert is not a function

      368 |       await mockSupabase
      369 |         .from('bylaw_sections')
    > 370 |         .insert(bulkSections);
          |          ^
      371 |
      372 |       const duration = performance.now() - startTime;
      373 |

      at Object.insert (tests/performance/dashboard-performance.test.js:370:10)

PASS tests/unit/workflow.test.js
  Workflow Stage Tests
    Single Stage Workflow
      ✓ should support 1-stage workflow (1 ms)
      ✓ should complete after single approval
    Two Stage Workflow (Committee/Board)
      ✓ should support 2-stage workflow
      ✓ should advance through both stages (1 ms)
    Three Stage Workflow
      ✓ should support 3-stage workflow
      ✓ should track progress through stages (1 ms)
    Five Stage Workflow (Maximum)
      ✓ should support maximum 5 stages
      ✓ should enforce 5-stage maximum (120 ms)
      ✓ should maintain history through all stages (1 ms)
    Permission-Based Workflow Control
      ✓ should enforce stage permissions
      ✓ should prevent unauthorized advancement (2 ms)
      ✓ should support multiple permission levels per stage
    Custom Workflow Configurations
      ✓ should support neighborhood council workflow (1 ms)
      ✓ should support corporate governance workflow (1 ms)
      ✓ should support academic policy workflow (1 ms)
    Workflow State Management
      ✓ should allow workflow reset (1 ms)
      ✓ should maintain audit trail (1 ms)

PASS tests/unit/hierarchyDetector.test.js
  Smart Hierarchy Detection Algorithm
    romanToArabic
      ✓ should convert basic Roman numerals (1 ms)
      ✓ should convert complex Roman numerals
      ✓ should handle lowercase Roman numerals
      ✓ should handle empty or null input
    letterToNumber
      ✓ should convert uppercase letters to numbers
      ✓ should convert lowercase letters to numbers
      ✓ should handle empty or null input
    parseNumberingStyle
      ✓ should parse Roman numeral uppercase (1 ms)
      ✓ should parse Roman numeral lowercase (1 ms)
      ✓ should parse Arabic numbers (1 ms)
      ✓ should parse uppercase letters (1 ms)
      ✓ should parse lowercase letters
      ✓ should parse decimal nested format (1 ms)
      ✓ should parse deeply nested decimal format
      ✓ should parse mixed format (1 ms)
      ✓ should parse parenthesized numbers
      ✓ should parse parenthesized letters
      ✓ should handle text without numbering
      ✓ should handle empty or null input
    detectHierarchyLevel
      ✓ should detect level from Roman numerals
      ✓ should detect level from Arabic numbers
      ✓ should detect level from letters
      ✓ should detect level from decimal nested format (1 ms)
      ✓ should adjust level based on indentation
      ✓ should detect level from heading style (1 ms)
      ✓ should detect level from font size
      ✓ should reduce level for bold text (1 ms)
      ✓ should cap level at 9
    buildSectionTree
      ✓ should build tree from simple hierarchy (1 ms)
      ✓ should build complex nested tree (1 ms)
      ✓ should handle empty input
      ✓ should track numbering patterns used (1 ms)
      ✓ should preserve node metadata (1 ms)
    validateNumberingSequence
      ✓ should validate correct sequence
      ✓ should detect sequence gaps (1 ms)
      ✓ should detect mixed numbering styles
      ✓ should handle empty input (1 ms)
      ✓ should handle nodes without numbering
    getSectionPath
      ✓ should find path to nested node (1 ms)
      ✓ should return empty path if node not found
      ✓ should find root level node (1 ms)
    Edge Cases and Complex Patterns
      ✓ should handle skipped numbering (I, II, IV)
      ✓ should handle multiple formats in same document (1 ms)
      ✓ should handle unnumbered sections with style (2 ms)
      ✓ should distinguish section titles from content
      ✓ should handle 10-level deep hierarchy
    Real-World Bylaw Pattern
      ✓ should handle typical bylaw structure (1 ms)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:98:44)
        at Object.requireSetupComplete (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:52:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:98:44)
      at Object.requireSetupComplete (tests/setup/setup-middleware.test.js:52:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:98:44)
        at Object.requireSetupComplete (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:64:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:98:44)
      at Object.requireSetupComplete (tests/setup/setup-middleware.test.js:64:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:98:44)
        at Object.requireSetupComplete (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:75:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:98:44)
      at Object.requireSetupComplete (tests/setup/setup-middleware.test.js:75:13)

  console.error
    Error checking global admin status: Error: Database connection failed
        at Object.<anonymous> (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/unit/roleAuth.test.js:73:16)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      25 |
      26 |     if (error) {
    > 27 |       console.error('Error checking global admin status:', error);
         |               ^
      28 |       return false;
      29 |     }
      30 |

      at error (src/middleware/globalAdmin.js:27:15)
      at Object.<anonymous> (tests/unit/roleAuth.test.js:81:22)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:98:44)
        at requireSetupComplete (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:89:17)
        at Array.forEach (<anonymous>)
        at Object.forEach (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:84:25)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:98:44)
      at requireSetupComplete (tests/setup/setup-middleware.test.js:89:17)
          at Array.forEach (<anonymous>)
      at Object.forEach (tests/setup/setup-middleware.test.js:84:25)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:98:44)
        at Object.requireSetupComplete (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:101:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:98:44)
      at Object.requireSetupComplete (tests/setup/setup-middleware.test.js:101:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:98:44)
        at Object.requireSetupComplete (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:112:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:98:44)
      at Object.requireSetupComplete (tests/setup/setup-middleware.test.js:112:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:114:44)
        at Object.preventSetupIfConfigured (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:125:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:114:44)
      at Object.preventSetupIfConfigured (tests/setup/setup-middleware.test.js:125:13)

  console.error
    Error in isGlobalAdmin: TypeError: req.supabase.from(...).select(...).eq(...).eq is not a function
        at eq (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/globalAdmin.js:21:8)
        at isGlobalAdmin (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/globalAdmin.js:52:27)
        at Object.getAccessibleOrganizations (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/unit/roleAuth.test.js:150:28)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      31 |     return !!data;
      32 |   } catch (error) {
    > 33 |     console.error('Error in isGlobalAdmin:', error);
         |             ^
      34 |     return false;
      35 |   }
      36 | }

      at error (src/middleware/globalAdmin.js:33:13)
      at isGlobalAdmin (src/middleware/globalAdmin.js:52:27)
      at Object.getAccessibleOrganizations (tests/unit/roleAuth.test.js:150:28)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:114:44)
        at Object.preventSetupIfConfigured (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:137:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:114:44)
      at Object.preventSetupIfConfigured (tests/setup/setup-middleware.test.js:137:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:114:44)
        at Object.preventSetupIfConfigured (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:148:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:114:44)
      at Object.preventSetupIfConfigured (tests/setup/setup-middleware.test.js:148:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:122:32)
        at Object.checkSetupStatus (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:166:34)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:122:32)
      at Object.checkSetupStatus (tests/setup/setup-middleware.test.js:166:34)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:122:32)
        at Object.checkSetupStatus (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:180:34)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:122:32)
      at Object.checkSetupStatus (tests/setup/setup-middleware.test.js:180:34)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:122:32)
        at Object.checkSetupStatus (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:194:34)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:122:32)
      at Object.checkSetupStatus (tests/setup/setup-middleware.test.js:194:34)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:122:32)
        at Object.checkSetupStatus (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:205:34)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:122:32)
      at Object.checkSetupStatus (tests/setup/setup-middleware.test.js:205:34)

/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:93
      return res.status(503).json({
                 ^

[TypeError: res.status is not a function]

Node.js v22.17.1
PASS tests/unit/approval-workflow.test.js (9.055 s)
  Approval Workflow Unit Tests
    Approval State Machine
      ✓ should initialize in draft state (27 ms)
      ✓ should allow transition from draft to committee review
      ✓ should allow committee approval
      ✓ should allow transition to board review after committee approval (1 ms)
      ✓ should allow board approval
      ✓ should prevent invalid state transitions (73 ms)
      ✓ should prevent transitions from final states
      ✓ should maintain transition history (1 ms)
      ✓ should allow rejection from review states (1 ms)
      ✓ should track metadata in transition history
    Section Locking
      ✓ should lock a section successfully (1 ms)
      ✓ should prevent locking already locked sections (1 ms)
      ✓ should unlock a section successfully
      ✓ should prevent unlocking non-locked sections (1 ms)
      ✓ should retrieve lock information (4 ms)
      ✓ should return null for non-locked sections
    Multi-Section Locking
      ✓ should lock multiple sections atomically (1 ms)
      ✓ should fail if any section is already locked
      ✓ should maintain multi-section flag in lock info
      ✓ should unlock multiple sections
      ✓ should handle partial unlocking gracefully
    Workflow and Locking Integration
      ✓ should lock section when committee approves
      ✓ should determine edit permissions based on state
      ✓ should prevent editing locked sections
    Edge Cases and Error Handling
      ✓ should handle rapid state transitions
      ✓ should handle empty section IDs in multi-lock
      ✓ should validate state transition permissions

FAIL tests/unit/parsers.test.js (8.217 s)
  Document Parser Tests
    Article/Section Format (Traditional)
      ✓ should parse Article I, Section 1 format (26 ms)
      ✕ should handle multiple articles (2 ms)
      ✓ should handle Roman numerals correctly
    Chapter/Article Format (Alternate)
      ✓ should parse Chapter/Article hierarchy (1 ms)
    Numbered Sections (Simple)
      ✓ should parse simple numbered sections (1 ms)
    Edge Cases
      ✕ should handle empty sections gracefully (1 ms)
      ✓ should handle sections without articles (1 ms)
      ✕ should preserve whitespace within content
      ✓ should handle very long section text (1 ms)
    Custom Hierarchy Patterns
      ✓ should support custom patterns via configuration (1 ms)
    Multi-level Depth
      ✓ should handle 3+ level hierarchies
  Parser Configuration
    ✓ should validate parser configuration (1 ms)
    ✓ should handle missing optional patterns
  Parser Performance
    ✕ should parse large documents efficiently (1 ms)

  ● Document Parser Tests › Article/Section Format (Traditional) › should handle multiple articles

    expect(received).toBe(expected) // Object.is equality

    Expected: "I"
    Received: "II"

      102 |
      103 |       expect(sections).toHaveLength(2);
    > 104 |       expect(sections[0].hierarchy.article.number).toBe('I');
          |                                                    ^
      105 |       expect(sections[1].hierarchy.article.number).toBe('II');
      106 |     });
      107 |

      at Object.toBe (tests/unit/parsers.test.js:104:52)

  ● Document Parser Tests › Edge Cases › should handle empty sections gracefully

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 1
    Received array:  [{"hierarchy": {"article": {"name": "TEST", "number": "I"}, "chapter": null, "section": {"number": "2", "title": "Has Content"}}, "text": "Some content here."}]

      175 |       const sections = parseDocumentHierarchy(content);
      176 |
    > 177 |       expect(sections).toHaveLength(2);
          |                        ^
      178 |       expect(sections[0].text).toBe('');
      179 |       expect(sections[1].text).toContain('content');
      180 |     });

      at Object.toHaveLength (tests/unit/parsers.test.js:177:24)

  ● Document Parser Tests › Edge Cases › should preserve whitespace within content

    expect(received).toContain(expected) // indexOf

    Expected substring: "  Indented"
    Received string:    "Indented text
        More indent
      Back to first level"

      203 |       const sections = parseDocumentHierarchy(content);
      204 |
    > 205 |       expect(sections[0].text).toContain('  Indented');
          |                                ^
      206 |       expect(sections[0].text).toContain('    More indent');
      207 |     });
      208 |

      at Object.toContain (tests/unit/parsers.test.js:205:32)

  ● Parser Performance › should parse large documents efficiently

    expect(received).toBe(expected) // Object.is equality

    Expected: 100
    Received: 101

      294 |     const duration = Date.now() - startTime;
      295 |
    > 296 |     expect(sections.length).toBe(100);
          |                             ^
      297 |     expect(duration).toBeLessThan(1000); // Should parse in < 1 second
      298 |   });
      299 | });

      at Object.toBe (tests/unit/parsers.test.js:296:29)

  console.log
    Testing Success Page Redirect Fix...

      at Object.log (tests/success-redirect.test.js:41:9)

  console.log
    Initial state:

      at Object.log (tests/success-redirect.test.js:43:9)

  console.log
    - setupData exists: true

      at Object.log (tests/success-redirect.test.js:44:9)

  console.log
    - isConfigured: false

      at Object.log (tests/success-redirect.test.js:45:9)

  console.log
    
    After clear-session:

      at Object.log (tests/success-redirect.test.js:50:9)

  console.log
    - setupData exists: false

      at Object.log (tests/success-redirect.test.js:51:9)

  console.log
    - isConfigured: true

      at Object.log (tests/success-redirect.test.js:52:9)

  console.log
    
    ✅ All tests passed!

      at Object.log (tests/success-redirect.test.js:59:9)

  console.log
    
    Fix verification:

      at Object.log (tests/success-redirect.test.js:60:9)

  console.log
    - Session properly clears setup data

      at Object.log (tests/success-redirect.test.js:61:9)

  console.log
    - Session correctly marks isConfigured=true

      at Object.log (tests/success-redirect.test.js:62:9)

  console.log
    - This prevents /bylaws from redirecting back to /setup

      at Object.log (tests/success-redirect.test.js:63:9)

  console.log
    - Buttons on success page will now work correctly

      at Object.log (tests/success-redirect.test.js:64:9)

FAIL tests/success-redirect.test.js
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/index.js:1057:18)
      at node_modules/@jest/core/build/index.js:1127:165
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL tests/unit/dashboard-ui.test.js (8.918 s)
  Dashboard UI/UX Tests
    Dashboard Rendering
      ✓ should render dashboard with organization name (38 ms)
      ✓ should render sections list (1 ms)
      ✓ should render statistics cards
      ✓ should render empty state when no sections (1 ms)
      ✓ should render section with locked indicator (1 ms)
      ✓ should render section with suggestion count badge
    Navigation Functionality
      ✓ should navigate to section details (1 ms)
      ✓ should navigate to upload page
      ✓ should navigate to settings (1 ms)
      ✓ should handle back navigation
    Responsive Design
      ✓ should adapt layout for mobile
      ✓ should show hamburger menu on mobile (1 ms)
      ✓ should adjust font sizes for readability
    Error States
      ✓ should display error message when data load fails (1 ms)
      ✓ should show loading spinner during data fetch
      ✓ should handle network timeout gracefully (1 ms)
      ✓ should show session expired message
    Loading States
      ✓ should show skeleton loaders for sections (1 ms)
      ✓ should show progressive loading for large datasets
      ✓ should debounce search input (1 ms)
    User Interactions
      ✓ should handle section selection
      ✓ should handle bulk selection (1 ms)
      ✕ should filter sections by search query (1 ms)
      ✓ should sort sections by different criteria (5 ms)
      ✓ should paginate large result sets
    Accessibility
      ✓ should provide aria labels for interactive elements
      ✓ should support keyboard navigation
      ✓ should provide screen reader announcements (1 ms)
      ✓ should have sufficient color contrast
    Performance Optimization
      ✓ should virtualize long lists
      ✓ should lazy load images (1 ms)
      ✓ should memoize expensive calculations (1 ms)

  ● Dashboard UI/UX Tests › User Interactions › should filter sections by search query

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 3
    Received array:  [{"section_citation": "Article I, Section 1", "section_title": "Purpose"}, {"section_citation": "Article I, Section 2", "section_title": "Boundaries"}, {"section_citation": "Article II, Section 1", "section_title": "Meetings"}]

      427 |       const result = filterSections(sections, 'article i');
      428 |
    > 429 |       expect(result).toHaveLength(2);
          |                      ^
      430 |       expect(result.every(s => s.section_citation.startsWith('Article I'))).toBe(true);
      431 |     });
      432 |

      at Object.toHaveLength (tests/unit/dashboard-ui.test.js:429:22)

  console.warn
    [WordParser] Missing or invalid hierarchy.levels, using empty array as fallback

      595 |     // Handle undefined, null, or non-array levels gracefully
      596 |     if (!levels || !Array.isArray(levels)) {
    > 597 |       console.warn('[WordParser] Missing or invalid hierarchy.levels, using empty array as fallback');
          |               ^
      598 |       levels = [];
      599 |     }
      600 |     let articleNumber = null;

      at WordParser.warn [as enrichSections] (src/parsers/wordParser.js:597:15)
      at enrichSections (tests/unit/wordParser.edge-cases.test.js:36:20)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (tests/unit/wordParser.edge-cases.test.js:37:14)

  console.warn
    [WordParser] Missing or invalid hierarchy.levels, using empty array as fallback

      595 |     // Handle undefined, null, or non-array levels gracefully
      596 |     if (!levels || !Array.isArray(levels)) {
    > 597 |       console.warn('[WordParser] Missing or invalid hierarchy.levels, using empty array as fallback');
          |               ^
      598 |       levels = [];
      599 |     }
      600 |     let articleNumber = null;

      at WordParser.warn [as enrichSections] (src/parsers/wordParser.js:597:15)
      at Object.enrichSections (tests/unit/wordParser.edge-cases.test.js:39:33)

  console.warn
    [WordParser] Missing or invalid hierarchy.levels, using empty array as fallback

      595 |     // Handle undefined, null, or non-array levels gracefully
      596 |     if (!levels || !Array.isArray(levels)) {
    > 597 |       console.warn('[WordParser] Missing or invalid hierarchy.levels, using empty array as fallback');
          |               ^
      598 |       levels = [];
      599 |     }
      600 |     let articleNumber = null;

      at WordParser.warn [as enrichSections] (src/parsers/wordParser.js:597:15)
      at enrichSections (tests/unit/wordParser.edge-cases.test.js:60:20)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (tests/unit/wordParser.edge-cases.test.js:61:14)

  console.warn
    [WordParser] Missing or invalid hierarchy.levels, using empty array as fallback

      595 |     // Handle undefined, null, or non-array levels gracefully
      596 |     if (!levels || !Array.isArray(levels)) {
    > 597 |       console.warn('[WordParser] Missing or invalid hierarchy.levels, using empty array as fallback');
          |               ^
      598 |       levels = [];
      599 |     }
      600 |     let articleNumber = null;

      at WordParser.warn [as enrichSections] (src/parsers/wordParser.js:597:15)
      at Object.enrichSections (tests/unit/wordParser.edge-cases.test.js:63:33)

  console.warn
    [WordParser] Missing or invalid hierarchy.levels, using empty array as fallback

      595 |     // Handle undefined, null, or non-array levels gracefully
      596 |     if (!levels || !Array.isArray(levels)) {
    > 597 |       console.warn('[WordParser] Missing or invalid hierarchy.levels, using empty array as fallback');
          |               ^
      598 |       levels = [];
      599 |     }
      600 |     let articleNumber = null;

      at WordParser.warn [as enrichSections] (src/parsers/wordParser.js:597:15)
      at enrichSections (tests/unit/wordParser.edge-cases.test.js:112:20)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (tests/unit/wordParser.edge-cases.test.js:113:14)

  console.error
    Error parsing Word document: Error: File not found - expected for this test
        at Object.<anonymous> (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/unit/wordParser.edge-cases.test.js:151:9)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      45 |       };
      46 |     } catch (error) {
    > 47 |       console.error('Error parsing Word document:', error);
         |               ^
      48 |       return {
      49 |         success: false,
      50 |         error: error.message,

      at WordParser.error [as parseDocument] (src/parsers/wordParser.js:47:15)
      at Object.<anonymous> (tests/unit/wordParser.edge-cases.test.js:160:22)

  console.log
    [WordParser] Detected TOC: lines 2-4 (4 lines matched pattern)

      at WordParser.log [as detectTableOfContents] (src/parsers/wordParser.js:103:15)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] Merged duplicate ARTICLE I (13 + 83 = 98 chars)

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:380:21)

  console.log
    [WordParser] ⚠️  Removed 1 duplicate sections

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:395:15)

  console.log
    [WordParser] Note: Source document contains duplicate content (e.g., table of contents + body)

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:396:15)

  console.log
    [WordParser] Deduplicated citations: ARTICLE I

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:400:15)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] Merged duplicate Section 2 (2 + 9 = 13 chars)

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:380:21)

  console.log
    [WordParser] Merged duplicate Section 2 (13 + 2 = 17 chars)

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:380:21)

  console.log
    [WordParser] Merged duplicate Section 2 (17 + 48 = 67 chars)

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:380:21)

  console.log
    [WordParser] ⚠️  Removed 3 duplicate sections

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:395:15)

  console.log
    [WordParser] Note: Source document contains duplicate content (e.g., table of contents + body)

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:396:15)

  console.log
    [WordParser] Deduplicated citations: Section 2

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:400:15)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] ✓ No duplicate sections found

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:402:15)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] Replacing empty duplicate Section 1 with content (19 chars)

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:387:19)

  console.log
    [WordParser] ⚠️  Removed 1 duplicate sections

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:395:15)

  console.log
    [WordParser] Note: Source document contains duplicate content (e.g., table of contents + body)

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:396:15)

  console.log
    [WordParser] Deduplicated citations: Section 1

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:400:15)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] Replacing empty duplicate ARTICLE I with content (7 chars)

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:387:19)

  console.log
    [WordParser] ⚠️  Removed 1 duplicate sections

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:395:15)

  console.log
    [WordParser] Note: Source document contains duplicate content (e.g., table of contents + body)

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:396:15)

  console.log
    [WordParser] Deduplicated citations: ARTICLE I

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:400:15)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] Skipping identical duplicate ARTICLE I

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:382:21)

  console.log
    [WordParser] ⚠️  Removed 1 duplicate sections

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:395:15)

  console.log
    [WordParser] Note: Source document contains duplicate content (e.g., table of contents + body)

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:396:15)

  console.log
    [WordParser] Deduplicated citations: ARTICLE I

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:400:15)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] Replacing empty duplicate Section 5 with content (12 chars)

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:387:19)

  console.log
    [WordParser] ⚠️  Removed 1 duplicate sections

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:395:15)

  console.log
    [WordParser] Note: Source document contains duplicate content (e.g., table of contents + body)

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:396:15)

  console.log
    [WordParser] Deduplicated citations: Section 5

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:400:15)

  console.log
    [WordParser] Scanning for orphaned content...

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:413:13)

  console.log
    [WordParser] Found 1 orphaned content block(s)

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:486:15)

  console.log
    [WordParser] Orphan details: [ { lines: '0-1', preview: 'This is preamble content...' } ]

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:487:15)

  console.log
    [WordParser] Created preamble section for orphan at lines 0-1

      at WordParser.log [as attachOrphansToSections] (src/parsers/wordParser.js:552:17)

  console.log
    [WordParser] Scanning for orphaned content...

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:413:13)

  console.log
    [WordParser] Detected TOC: lines 2-4 (4 lines matched pattern)

      at WordParser.log [as detectTableOfContents] (src/parsers/wordParser.js:103:15)

  console.log
    [WordParser] No orphaned content found - all content captured!

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:492:15)

  console.log
    [WordParser] Scanning for orphaned content...

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:413:13)

  console.log
    [WordParser] Found 1 orphaned content block(s)

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:486:15)

  console.log
    [WordParser] Orphan details: [ { lines: '0-0', preview: 'A...' } ]

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:487:15)

  console.log
    [WordParser] Skipping trivial orphan at lines 0-0

      at WordParser.log [as attachOrphansToSections] (src/parsers/wordParser.js:515:17)

  console.log
    [CONFIG-DEBUG] 📊 Database returned:

      at OrganizationConfig.log [as loadFromDatabase] (src/config/organizationConfig.js:266:15)

  console.log
    [CONFIG-DEBUG]   - settings keys: []

      at OrganizationConfig.log [as loadFromDatabase] (src/config/organizationConfig.js:267:15)

  console.log
    [CONFIG-DEBUG]   - hierarchy_config: present

      at OrganizationConfig.log [as loadFromDatabase] (src/config/organizationConfig.js:268:15)

  console.log
    [CONFIG-DEBUG]   - settings.hierarchy: absent

      at OrganizationConfig.log [as loadFromDatabase] (src/config/organizationConfig.js:269:15)

  console.log
    [CONFIG-DEBUG] ✅ Using complete hierarchy from database

      at OrganizationConfig.log [as loadFromDatabase] (src/config/organizationConfig.js:300:17)

  console.log
    [CONFIG-DEBUG] 📦 Returning dbConfig with keys: [ 'hierarchy' ]

      at OrganizationConfig.log [as loadFromDatabase] (src/config/organizationConfig.js:311:15)

  console.log
    [CONFIG-DEBUG]   - dbConfig.hierarchy: present

      at OrganizationConfig.log [as loadFromDatabase] (src/config/organizationConfig.js:312:15)

  console.log
    [CONFIG-DEBUG]   - dbConfig.hierarchy.levels: 2

      at OrganizationConfig.log [as loadFromDatabase] (src/config/organizationConfig.js:313:15)

  console.log
    [SETUP-DEBUG] 📋 Loaded organization config:

      at SetupService.log [as processDocumentImport] (src/services/setupService.js:180:15)

  console.log
    [SETUP-DEBUG]   - Has hierarchy: true

      at SetupService.log [as processDocumentImport] (src/services/setupService.js:181:15)

  console.log
    [SETUP-DEBUG]   - Hierarchy levels: 2

      at SetupService.log [as processDocumentImport] (src/services/setupService.js:182:15)

  console.warn
    [WordParser] Missing or invalid hierarchy.levels, using empty array as fallback

      595 |     // Handle undefined, null, or non-array levels gracefully
      596 |     if (!levels || !Array.isArray(levels)) {
    > 597 |       console.warn('[WordParser] Missing or invalid hierarchy.levels, using empty array as fallback');
          |               ^
      598 |       levels = [];
      599 |     }
      600 |     let articleNumber = null;

      at WordParser.warn [as enrichSections] (src/parsers/wordParser.js:597:15)
      at Object.enrichSections (tests/unit/wordParser.edge-cases.test.js:594:35)

  console.log
    [SETUP-DEBUG]     * Article (type: article, depth: 0)

      at log (src/services/setupService.js:185:19)
          at Array.forEach (<anonymous>)

  console.log
    [SETUP-DEBUG]     * Section (type: section, depth: 1)

      at log (src/services/setupService.js:185:19)
          at Array.forEach (<anonymous>)

  console.warn
    [WordParser] Missing or invalid hierarchy.levels, using empty array as fallback

      595 |     // Handle undefined, null, or non-array levels gracefully
      596 |     if (!levels || !Array.isArray(levels)) {
    > 597 |       console.warn('[WordParser] Missing or invalid hierarchy.levels, using empty array as fallback');
          |               ^
      598 |       levels = [];
      599 |     }
      600 |     let articleNumber = null;

      at WordParser.warn [as enrichSections] (src/parsers/wordParser.js:597:15)
      at Object.enrichSections (tests/unit/wordParser.edge-cases.test.js:611:35)

  console.warn
    [WordParser] Missing or invalid hierarchy.levels, using empty array as fallback

      595 |     // Handle undefined, null, or non-array levels gracefully
      596 |     if (!levels || !Array.isArray(levels)) {
    > 597 |       console.warn('[WordParser] Missing or invalid hierarchy.levels, using empty array as fallback');
          |               ^
      598 |       levels = [];
      599 |     }
      600 |     let articleNumber = null;

      at WordParser.warn [as enrichSections] (src/parsers/wordParser.js:597:15)
      at Object.enrichSections (tests/unit/wordParser.edge-cases.test.js:627:35)

  console.warn
    [WordParser] Missing or invalid hierarchy.levels, using empty array as fallback

      595 |     // Handle undefined, null, or non-array levels gracefully
      596 |     if (!levels || !Array.isArray(levels)) {
    > 597 |       console.warn('[WordParser] Missing or invalid hierarchy.levels, using empty array as fallback');
          |               ^
      598 |       levels = [];
      599 |     }
      600 |     let articleNumber = null;

      at WordParser.warn [as enrichSections] (src/parsers/wordParser.js:597:15)
      at enrichSections (tests/unit/wordParser.edge-cases.test.js:649:20)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (tests/unit/wordParser.edge-cases.test.js:650:14)

PASS tests/unit/wordParser.edge-cases.test.js (11.798 s)
  Word Parser - Critical Edge Cases
    Issue #1: Undefined Level Handling
      ✓ should handle undefined hierarchy levels array (724 ms)
      ✓ should handle missing hierarchy config entirely (20 ms)
      ✓ should handle empty levels array (1 ms)
      ✓ should handle null hierarchy config (9 ms)
      ✓ should use level defaults when levelDef not found (1 ms)
      ✓ should handle parseDocument with undefined levels (25 ms)
    Issue #2: Duplicate Section Prevention
      ✓ should detect Table of Contents patterns (4 ms)
      ✓ should deduplicate sections by citation (5 ms)
      ✓ should handle multiple duplicates of same section (5 ms)
      ✓ should not deduplicate different citations (2 ms)
      ✓ should prefer section with content over empty duplicate (4 ms)
      ✓ should handle deduplication with undefined text fields (10 ms)
      ✓ should handle deduplication with null text fields (4 ms)
    Text Normalization Edge Cases
      ✓ should handle TAB-separated content correctly (1 ms)
      ✓ should handle multiple spaces and tabs
      ✓ should normalize case consistently (1 ms)
    Orphaned Content Handling
      ✓ should capture content before first section (4 ms)
      ✓ should not capture TOC lines as orphans (7 ms)
      ✓ should skip trivial orphaned content (3 ms)
    Section Validation
      ✓ should detect empty sections
      ✓ should detect duplicate citations
      ✓ should handle validation with no errors (1 ms)
    Citation Building
      ✓ should build hierarchical citations for sections
      ✓ should handle section without parent article
      ✓ should build simple citation for articles (1 ms)
      ✓ should find most recent parent article for subsections
    Title and Content Extraction
      ✓ should extract title with colon delimiter (1 ms)
      ✓ should extract title and content with dash separator
      ✓ should handle title only (no content) (1 ms)
      ✓ should handle content on same line as header
      ✓ should generate default title when none provided (1 ms)
    Performance and Edge Cases
      ✓ should handle very large documents efficiently (15 ms)
      ✓ should handle sections with special characters (8 ms)
      ✓ should handle Unicode characters (9 ms)
      ✓ should handle extremely long text content (8 ms)

PASS tests/integration/admin-api.test.js (6.917 s)
  Admin API Integration Tests
    GET /admin/dashboard
      ✓ should return admin dashboard with all organizations (5061 ms)
      ✓ should deny access to non-admin users (2 ms)
      ✓ should calculate system-wide statistics (1 ms)
      ✓ should handle database errors gracefully (1 ms)
    GET /admin/organization/:id
      ✓ should return detailed organization view
      ✓ should return 404 for non-existent organization (1 ms)
      ✓ should include recent activity for organization
    POST /admin/organization/:id/delete
      ✓ should delete organization with confirmation (1 ms)
      ✓ should require DELETE confirmation (1 ms)
      ✓ should handle deletion errors
      ✓ should deny deletion without admin access
    User Management
      ✓ should list users for organization (1 ms)
      ✓ should handle role-based filtering
    Statistics and Metrics
      ✓ should calculate organization metrics correctly (1 ms)
      ✓ should aggregate statistics across organizations
    Error Handling and Edge Cases
      ✓ should handle empty organizations list
      ✓ should handle organizations with no users (1 ms)
      ✓ should handle concurrent admin requests

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] Merged duplicate Article I (13 + 56 = 71 chars)

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:380:21)

  console.log
    [WordParser] ⚠️  Removed 1 duplicate sections

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:395:15)

  console.log
    [WordParser] Note: Source document contains duplicate content (e.g., table of contents + body)

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:396:15)

  console.log
    [WordParser] Deduplicated citations: Article I

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:400:15)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] Merged duplicate Section 1 (39 + 5 = 46 chars)

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:380:21)

  console.log
    [WordParser] ⚠️  Removed 1 duplicate sections

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:395:15)

  console.log
    [WordParser] Note: Source document contains duplicate content (e.g., table of contents + body)

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:396:15)

  console.log
    [WordParser] Deduplicated citations: Section 1

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:400:15)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] ✓ No duplicate sections found

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:402:15)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] Merged duplicate Section 2 (2 + 24 = 28 chars)

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:380:21)

  console.log
    [WordParser] Merged duplicate Section 2 (28 + 2 = 32 chars)

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:380:21)

  console.log
    [WordParser] Merged duplicate Section 2 (32 + 57 = 91 chars)

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:380:21)

  console.log
    [WordParser] ⚠️  Removed 3 duplicate sections

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:395:15)

  console.log
    [WordParser] Note: Source document contains duplicate content (e.g., table of contents + body)

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:396:15)

  console.log
    [WordParser] Deduplicated citations: Section 2

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:400:15)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] Replacing empty duplicate Article I with content (19 chars)

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:387:19)

  console.log
    [WordParser] ⚠️  Removed 1 duplicate sections

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:395:15)

  console.log
    [WordParser] Note: Source document contains duplicate content (e.g., table of contents + body)

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:396:15)

  console.log
    [WordParser] Deduplicated citations: Article I

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:400:15)

FAIL tests/unit/deduplication.test.js (12.825 s)
  Section Deduplication
    ✓ should remove duplicate sections with same citation and title (482 ms)
    ✕ should keep original when duplicate has less content (5 ms)
    ✓ should handle sections with no duplicates (3 ms)
    ✓ should handle multiple duplicates of same section (6 ms)
    ✓ should handle empty sections in duplicates (7 ms)
    ✓ should log duplicate removal information (1 ms)

  ● Section Deduplication › should keep original when duplicate has less content

    expect(received).toBe(expected) // Object.is equality

    - Expected  - 0
    + Received  + 2

      Original content with lots of text here
    +
    + Short

      68 |
      69 |     expect(deduplicated).toHaveLength(1);
    > 70 |     expect(deduplicated[0].text).toBe('Original content with lots of text here');
         |                                  ^
      71 |   });
      72 |
      73 |   test('should handle sections with no duplicates', () => {

      at Object.toBe (tests/unit/deduplication.test.js:70:34)

  console.log
    [WordParser] Filtered 0 TOC items, kept 2 real headers

      at WordParser.log [as parseSections] (src/parsers/wordParser.js:151:13)

  console.log
    [WordParser] Scanning for orphaned content...

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:413:13)

  console.log
    [WordParser] Found 1 orphaned content block(s)

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:486:15)

  console.log
    [WordParser] Orphan details: [ { lines: '0-1', preview: 'This is a preamble paragraph....' } ]

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:487:15)

  console.log
    [WordParser] Created preamble section for orphan at lines 0-1

      at WordParser.log [as attachOrphansToSections] (src/parsers/wordParser.js:552:17)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] ✓ No duplicate sections found

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:402:15)

  console.log
    [WordParser] Filtered 0 TOC items, kept 2 real headers

      at WordParser.log [as parseSections] (src/parsers/wordParser.js:151:13)

  console.log
    [WordParser] Scanning for orphaned content...

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:413:13)

  console.log
    [WordParser] No orphaned content found - all content captured!

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:492:15)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] ✓ No duplicate sections found

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:402:15)

  console.log
    [WordParser] Filtered 0 TOC items, kept 3 real headers

      at WordParser.log [as parseSections] (src/parsers/wordParser.js:151:13)

  console.log
    [WordParser] Scanning for orphaned content...

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:413:13)

  console.log
    [WordParser] No orphaned content found - all content captured!

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:492:15)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] ✓ No duplicate sections found

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:402:15)

  console.log
    [WordParser] Filtered 0 TOC items, kept 4 real headers

      at WordParser.log [as parseSections] (src/parsers/wordParser.js:151:13)

  console.log
    [WordParser] Scanning for orphaned content...

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:413:13)

  console.log
    [WordParser] No orphaned content found - all content captured!

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:492:15)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] ✓ No duplicate sections found

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:402:15)

  console.log
    [WordParser] Filtered 0 TOC items, kept 4 real headers

      at WordParser.log [as parseSections] (src/parsers/wordParser.js:151:13)

  console.log
    [WordParser] Scanning for orphaned content...

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:413:13)

  console.log
    [WordParser] No orphaned content found - all content captured!

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:492:15)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] Merged duplicate ARTICLE I, Section 1 (17 + 31 = 50 chars)

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:380:21)

  console.log
    [WordParser] ⚠️  Removed 1 duplicate sections

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:395:15)

  console.log
    [WordParser] Note: Source document contains duplicate content (e.g., table of contents + body)

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:396:15)

  console.log
    [WordParser] Deduplicated citations: ARTICLE I, Section 1

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:400:15)

  console.log
    [WordParser] Filtered 0 TOC items, kept 4 real headers

      at WordParser.log [as parseSections] (src/parsers/wordParser.js:151:13)

  console.log
    [WordParser] Scanning for orphaned content...

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:413:13)

  console.log
    [WordParser] No orphaned content found - all content captured!

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:492:15)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] ✓ No duplicate sections found

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:402:15)

  console.log
    [WordParser] Filtered 0 TOC items, kept 4 real headers

      at WordParser.log [as parseSections] (src/parsers/wordParser.js:151:13)

  console.log
    [WordParser] Scanning for orphaned content...

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:413:13)

  console.log
    [WordParser] No orphaned content found - all content captured!

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:492:15)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] ✓ No duplicate sections found

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:402:15)

  console.log
    [WordParser] Filtered 0 TOC items, kept 2 real headers

      at WordParser.log [as parseSections] (src/parsers/wordParser.js:151:13)

  console.log
    [WordParser] Scanning for orphaned content...

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:413:13)

  console.log
    [WordParser] No orphaned content found - all content captured!

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:492:15)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] ✓ No duplicate sections found

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:402:15)

  console.log
    [WordParser] Filtered 0 TOC items, kept 4 real headers

      at WordParser.log [as parseSections] (src/parsers/wordParser.js:151:13)

  console.log
    [WordParser] Scanning for orphaned content...

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:413:13)

  console.log
    [WordParser] Found 2 orphaned content block(s)

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:486:15)

  console.log
    [WordParser] Orphan details: [
      { lines: '0-0', preview: 'Introduction...' },
      { lines: '2-2', preview: 'This document uses mixed formatting....' }
    ]

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:487:15)

  console.log
    [WordParser] Created preamble section for orphan at lines 0-0

      at WordParser.log [as attachOrphansToSections] (src/parsers/wordParser.js:552:17)

  console.log
    [WordParser] Attached orphan (lines 2-2) to section: Preamble

      at WordParser.log [as attachOrphansToSections] (src/parsers/wordParser.js:535:19)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] ✓ No duplicate sections found

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:402:15)

  console.log
    [WordParser] Filtered 0 TOC items, kept 0 real headers

      at WordParser.log [as parseSections] (src/parsers/wordParser.js:151:13)

  console.log
    [WordParser] Scanning for orphaned content...

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:413:13)

  console.log
    [WordParser] Found 4 orphaned content block(s)

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:486:15)

  console.log
    [WordParser] Orphan details: [
      { lines: '0-0', preview: 'This is a simple document....' },
      {
        lines: '2-2',
        preview: 'It has no traditional section numbers....'
      },
      { lines: '4-4', preview: 'Just plain paragraphs of content....' },
      { lines: '6-6', preview: 'Multiple lines describing something....' }
    ]

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:487:15)

  console.log
    [WordParser] Created unnumbered section for orphan at lines 0-0

      at WordParser.log [as attachOrphansToSections] (src/parsers/wordParser.js:568:17)

  console.log
    [WordParser] Created unnumbered section for orphan at lines 2-2

      at WordParser.log [as attachOrphansToSections] (src/parsers/wordParser.js:568:17)

  console.log
    [WordParser] Created unnumbered section for orphan at lines 4-4

      at WordParser.log [as attachOrphansToSections] (src/parsers/wordParser.js:568:17)

  console.log
    [WordParser] Created unnumbered section for orphan at lines 6-6

      at WordParser.log [as attachOrphansToSections] (src/parsers/wordParser.js:568:17)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] ✓ No duplicate sections found

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:402:15)

  console.log
    [WordParser] Filtered 0 TOC items, kept 5 real headers

      at WordParser.log [as parseSections] (src/parsers/wordParser.js:151:13)

  console.log
    [WordParser] Scanning for orphaned content...

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:413:13)

  console.log
    [WordParser] No orphaned content found - all content captured!

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:492:15)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] ✓ No duplicate sections found

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:402:15)

  console.log
    [WordParser] Filtered 0 TOC items, kept 0 real headers

      at WordParser.log [as parseSections] (src/parsers/wordParser.js:151:13)

  console.log
    [WordParser] Scanning for orphaned content...

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:413:13)

  console.log
    [WordParser] No orphaned content found - all content captured!

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:492:15)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] ✓ No duplicate sections found

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:402:15)

  console.log
    [WordParser] Filtered 0 TOC items, kept 0 real headers

      at WordParser.log [as parseSections] (src/parsers/wordParser.js:151:13)

  console.log
    [WordParser] Scanning for orphaned content...

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:413:13)

  console.log
    [WordParser] No orphaned content found - all content captured!

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:492:15)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] ✓ No duplicate sections found

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:402:15)

  console.log
    [WordParser] Filtered 0 TOC items, kept 2 real headers

      at WordParser.log [as parseSections] (src/parsers/wordParser.js:151:13)

  console.log
    [WordParser] Scanning for orphaned content...

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:413:13)

  console.log
    [WordParser] No orphaned content found - all content captured!

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:492:15)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] ✓ No duplicate sections found

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:402:15)

  console.log
    [WordParser] Filtered 0 TOC items, kept 3 real headers

      at WordParser.log [as parseSections] (src/parsers/wordParser.js:151:13)

  console.log
    [WordParser] Scanning for orphaned content...

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:413:13)

  console.log
    [WordParser] No orphaned content found - all content captured!

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:492:15)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] ✓ No duplicate sections found

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:402:15)

  console.log
    [WordParser] Filtered 0 TOC items, kept 2 real headers

      at WordParser.log [as parseSections] (src/parsers/wordParser.js:151:13)

  console.log
    [WordParser] Scanning for orphaned content...

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:413:13)

  console.log
    [WordParser] No orphaned content found - all content captured!

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:492:15)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] ✓ No duplicate sections found

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:402:15)

  console.log
    [WordParser] Filtered 0 TOC items, kept 2 real headers

      at WordParser.log [as parseSections] (src/parsers/wordParser.js:151:13)

  console.log
    [WordParser] Scanning for orphaned content...

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:413:13)

  console.log
    [WordParser] No orphaned content found - all content captured!

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:492:15)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] ✓ No duplicate sections found

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:402:15)

PASS tests/unit/wordParser.orphan.test.js (13.487 s)
  Word Parser - Orphaned Content Capture
    Unnumbered Content
      ✓ should capture preamble before first section (440 ms)
      ✓ should capture trailing content after last section (4 ms)
      ✓ should create unnumbered sections for standalone blocks (3 ms)
    Missing Section Numbers
      ✓ should handle documents with skipped numbers (9 ms)
      ✓ should handle documents with duplicate numbers (5 ms)
      ✓ should handle out-of-order section numbers (3 ms)
    Content Between Articles
      ✓ should capture transitional content between articles (3 ms)
      ✓ should handle article-level notes (3 ms)
    Mixed Format Documents
      ✓ should handle documents with multiple formatting styles (5 ms)
      ✓ should handle documents with only unnumbered content (11 ms)
      ✓ should preserve all content even with weird numbering (5 ms)
    Edge Cases
      ✓ should handle empty document gracefully (8 ms)
      ✓ should handle document with only whitespace (3 ms)
      ✓ should not duplicate content during capture (3 ms)
      ✓ should handle very long orphaned content (3 ms)
    Content Integrity
      ✓ should maintain exact content without modifications (3 ms)
      ✓ should capture special characters correctly (3 ms)

PASS tests/e2e/admin-flow.test.js (7.223 s)
  End-to-End Admin Flow Tests
    Admin Login and Dashboard Access
      ✓ should complete full admin login flow (21 ms)
      ✓ should prevent non-admin from accessing admin dashboard (1 ms)
      ✓ should require authentication for admin routes
    Complete Approval Workflow E2E
      ✓ should complete full approval workflow
      ✓ should handle rejection workflow (1 ms)
    Multi-Section Approval Workflow E2E
      ✓ should approve multiple sections together
      ✓ should rollback if multi-section lock fails
    Admin Organization Management E2E
      ✓ should view and manage organizations (1 ms)
      ✓ should switch between organizations
    User Management E2E
      ✓ should manage users across organizations (1 ms)
    Export and Reporting E2E
      ✓ should export committee selections (3 ms)
      ✓ should export board approvals
      ✓ should generate approval history report
    Error Handling and Edge Cases
      ✓ should handle session expiration gracefully
      ✓ should prevent concurrent conflicting operations (1 ms)
      ✓ should validate permissions for each operation
    Performance and Load Testing
      ✓ should handle multiple concurrent user sessions
      ✓ should handle rapid approval workflow iterations
    Security Testing
      ✓ should prevent SQL injection in queries (1 ms)
      ✓ should prevent XSS in suggestion text
      ✓ should enforce CSRF protection (1 ms)

FAIL tests/setup-parser-integration.test.js (15.325 s)
  Setup Parser Integration
    ✓ setupService can access wordParser (40 ms)
    ✓ wordParser is exported correctly (1 ms)
    ✓ setupService.processDocumentImport has correct signature (1 ms)
    ✓ integration flow validation (582 ms)
    ✓ parser can be called with organization config (1 ms)
  Setup Route Integration
    ✕ setup route case statement is updated (3542 ms)

  ● Setup Route Integration › setup route case statement is updated

    expect(received).toContain(expected) // indexOf

    Expected substring: "case 'import'"
    Received string:    "function router(req, res, next) {
        router.handle(req, res, next);
      }"

      88 |
      89 |     // Verify the import case has been updated
    > 90 |     expect(routeString).toContain('case \'import\'');
         |                         ^
      91 |     expect(routeString).toContain('setupService');
      92 |     expect(routeString).toContain('processDocumentImport');
      93 |   });

      at Object.toContain (tests/setup-parser-integration.test.js:90:25)

  console.error
    Error parsing Word document: Error: ENOENT: no such file or directory, open '/path/to/test.docx'
        at open (node:internal/fs/promises:639:25)
        at Object.readFile (node:internal/fs/promises:1243:14)
        at WordParser.parseDocument (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/parsers/wordParser.js:16:22)
        at SetupService.processDocumentImport (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/services/setupService.js:190:27) {
      errno: -2,
      code: 'ENOENT',
      syscall: 'open',
      path: '/path/to/test.docx'
    }

      39 |         metadata: {
      40 |           source: 'word',
    > 41 |           fileName: filePath.split('/').pop(),
         |               ^
      42 |           parsedAt: new Date().toISOString(),
      43 |           sectionCount: sections.length
      44 |         }

      at WordParser.parseDocument (src/parsers/wordParser.js:41:15)
      at SetupService.processDocumentImport (src/services/setupService.js:190:27)

  console.error
    Error parsing Word document: Error: ENOENT: no such file or directory, open '/mock/path.docx'
        at open (node:internal/fs/promises:639:25)
        at Object.readFile (node:internal/fs/promises:1243:14)
        at WordParser.parseDocument (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/parsers/wordParser.js:16:22) {
      errno: -2,
      code: 'ENOENT',
      syscall: 'open',
      path: '/mock/path.docx'
    }

      39 |         metadata: {
      40 |           source: 'word',
    > 41 |           fileName: filePath.split('/').pop(),
         |               ^
      42 |           parsedAt: new Date().toISOString(),
      43 |           sectionCount: sections.length
      44 |         }

      at WordParser.parseDocument (src/parsers/wordParser.js:41:15)

FAIL tests/setup/setup-routes.test.js (14.637 s)
  Setup Routes
    Organization Setup
      ✕ should validate organization name is required (22 ms)
      ✕ should validate organization type is required (1 ms)
      ✕ should validate email format (1 ms)
      ✓ should accept valid organization data
      ✓ should accept optional fields
    Document Structure Setup
      ✕ should validate structure type is required
      ✕ should validate structure type is one of allowed types
      ✓ should accept valid structure types (1 ms)
      ✓ should use default values for custom labels
    Workflow Configuration
      ✕ should require at least one workflow stage
      ✕ should enforce maximum of 5 stages
      ✕ should validate each stage has a name
      ✕ should validate each stage has approval type
      ✕ should validate approval type is valid
      ✓ should validate vote threshold percentage for supermajority type (1 ms)
      ✓ should accept valid workflow configuration
      ✓ should accept valid supermajority configuration
      ✓ should accept legacy quorum configuration for backwards compatibility
    Document Import
      ✕ should validate file type
      ✕ should validate file size
      ✓ should accept valid Word document
      ✓ should accept .doc files (1 ms)
    Session Management
      ✓ should maintain setup data across steps
      ✓ should track completed steps (1 ms)

  ● Setup Routes › Organization Setup › should validate organization name is required

    TypeError: expect(...).toContainMatch is not a function

      136 |
      137 |             expect(result.valid).toBe(false);
    > 138 |             expect(result.errors).toContainMatch(/organization name/i);
          |                                   ^
      139 |         });
      140 |
      141 |         test('should validate organization type is required', () => {

      at Object.toContainMatch (tests/setup/setup-routes.test.js:138:35)

  ● Setup Routes › Organization Setup › should validate organization type is required

    TypeError: expect(...).toContainMatch is not a function

      148 |
      149 |             expect(result.valid).toBe(false);
    > 150 |             expect(result.errors).toContainMatch(/organization type/i);
          |                                   ^
      151 |         });
      152 |
      153 |         test('should validate email format', () => {

      at Object.toContainMatch (tests/setup/setup-routes.test.js:150:35)

  ● Setup Routes › Organization Setup › should validate email format

    TypeError: expect(...).toContainMatch is not a function

      164 |
      165 |                 expect(result.valid).toBe(false);
    > 166 |                 expect(result.errors).toContainMatch(/email/i);
          |                                       ^
      167 |             });
      168 |         });
      169 |

      at toContainMatch (tests/setup/setup-routes.test.js:166:39)
          at Array.forEach (<anonymous>)
      at Object.forEach (tests/setup/setup-routes.test.js:156:27)

  ● Setup Routes › Document Structure Setup › should validate structure type is required

    TypeError: expect(...).toContainMatch is not a function

      205 |
      206 |             expect(result.valid).toBe(false);
    > 207 |             expect(result.errors).toContainMatch(/structure type/i);
          |                                   ^
      208 |         });
      209 |
      210 |         test('should validate structure type is one of allowed types', () => {

      at Object.toContainMatch (tests/setup/setup-routes.test.js:207:35)

  ● Setup Routes › Document Structure Setup › should validate structure type is one of allowed types

    TypeError: expect(...).toContainMatch is not a function

      216 |
      217 |             expect(result.valid).toBe(false);
    > 218 |             expect(result.errors).toContainMatch(/invalid/i);
          |                                   ^
      219 |         });
      220 |
      221 |         test('should accept valid structure types', () => {

      at Object.toContainMatch (tests/setup/setup-routes.test.js:218:35)

  ● Setup Routes › Workflow Configuration › should require at least one workflow stage

    TypeError: expect(...).toContainMatch is not a function

      257 |
      258 |             expect(result.valid).toBe(false);
    > 259 |             expect(result.errors).toContainMatch(/at least one/i);
          |                                   ^
      260 |         });
      261 |
      262 |         test('should enforce maximum of 5 stages', () => {

      at Object.toContainMatch (tests/setup/setup-routes.test.js:259:35)

  ● Setup Routes › Workflow Configuration › should enforce maximum of 5 stages

    TypeError: expect(...).toContainMatch is not a function

      276 |
      277 |             expect(result.valid).toBe(false);
    > 278 |             expect(result.errors).toContainMatch(/maximum/i);
          |                                   ^
      279 |         });
      280 |
      281 |         test('should validate each stage has a name', () => {

      at Object.toContainMatch (tests/setup/setup-routes.test.js:278:35)

  ● Setup Routes › Workflow Configuration › should validate each stage has a name

    TypeError: expect(...).toContainMatch is not a function

      290 |
      291 |             expect(result.valid).toBe(false);
    > 292 |             expect(result.errors).toContainMatch(/name/i);
          |                                   ^
      293 |         });
      294 |
      295 |         test('should validate each stage has approval type', () => {

      at Object.toContainMatch (tests/setup/setup-routes.test.js:292:35)

  ● Setup Routes › Workflow Configuration › should validate each stage has approval type

    TypeError: expect(...).toContainMatch is not a function

      304 |
      305 |             expect(result.valid).toBe(false);
    > 306 |             expect(result.errors).toContainMatch(/approval type/i);
          |                                   ^
      307 |         });
      308 |
      309 |         test('should validate approval type is valid', () => {

      at Object.toContainMatch (tests/setup/setup-routes.test.js:306:35)

  ● Setup Routes › Workflow Configuration › should validate approval type is valid

    TypeError: expect(...).toContainMatch is not a function

      318 |
      319 |             expect(result.valid).toBe(false);
    > 320 |             expect(result.errors).toContainMatch(/invalid/i);
          |                                   ^
      321 |         });
      322 |
      323 |         test('should validate vote threshold percentage for supermajority type', () => {

      at Object.toContainMatch (tests/setup/setup-routes.test.js:320:35)

  ● Setup Routes › Document Import › should validate file type

    TypeError: expect(...).toContainMatch is not a function

      390 |
      391 |             expect(result.valid).toBe(false);
    > 392 |             expect(result.errors).toContainMatch(/word/i);
          |                                   ^
      393 |         });
      394 |
      395 |         test('should validate file size', () => {

      at Object.toContainMatch (tests/setup/setup-routes.test.js:392:35)

  ● Setup Routes › Document Import › should validate file size

    TypeError: expect(...).toContainMatch is not a function

      402 |
      403 |             expect(result.valid).toBe(false);
    > 404 |             expect(result.errors).toContainMatch(/10mb/i);
          |                                   ^
      405 |         });
      406 |
      407 |         test('should accept valid Word document', () => {

      at Object.toContainMatch (tests/setup/setup-routes.test.js:404:35)

  console.log
    [WordParser] Detected TOC: lines 30-128 (51 lines matched pattern)

      at WordParser.log [as detectTableOfContents] (src/parsers/wordParser.js:103:15)

  console.log
    [WordParser] Filtered 47 TOC items, kept 60 real headers

      at WordParser.log [as parseSections] (src/parsers/wordParser.js:151:13)

  console.log
    [WordParser] Scanning for orphaned content...

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:413:13)

  console.log
    [WordParser] Detected TOC: lines 30-128 (51 lines matched pattern)

      at WordParser.log [as detectTableOfContents] (src/parsers/wordParser.js:103:15)

  console.log
    [WordParser] Found 2 orphaned content block(s)

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:486:15)

  console.log
    [WordParser] Orphan details: [
      { lines: '18-18', preview: 'BYLAWS OF THE...' },
      {
        lines: '22-22',
        preview: 'RESEDA NEIGHBORHOOD COUNCIL May 17, 2024...'
      }
    ]

      at WordParser.log [as captureOrphanedContent] (src/parsers/wordParser.js:487:15)

  console.log
    [WordParser] Created preamble section for orphan at lines 18-18

      at WordParser.log [as attachOrphansToSections] (src/parsers/wordParser.js:552:17)

  console.log
    [WordParser] Attached orphan (lines 22-22) to section: Preamble

      at WordParser.log [as attachOrphansToSections] (src/parsers/wordParser.js:535:19)

  console.log
    [WordParser] Checking for duplicate sections...

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:355:13)

  console.log
    [WordParser] ✓ No duplicate sections found

      at WordParser.log [as deduplicateSections] (src/parsers/wordParser.js:402:15)

  console.log
    Original words: 9211

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:96:15)

  console.log
    Parsed words: 8917

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:97:15)

  console.log
    Retention rate: 96.81%

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:98:15)

  console.log
    Original characters: 46747

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:114:15)

  console.log
    Parsed characters: 45220

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:115:15)

  console.log
    Retention rate: 96.73%

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:116:15)

  console.log
    Reconstructed length: 47049

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:140:15)

  console.log
    Original length: 46747

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:141:15)

  console.log
    Coverage: 100.65%

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:142:15)

  console.log
    Total articles detected: 14

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:152:15)

  console.log
    Articles: Article I, Article II, Article III, Article IV, Article V, Article VI, Article VII, Article VIII, Article IX, Article X, Article XI, Article XII, Article XIII, Article XIV

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:153:15)

  console.log
    Total sections detected: 36

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:162:15)

  console.log
    Total subsections detected: 0

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:171:15)

  console.log
    Total clauses detected: 0

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:180:15)

  console.log
    Gaps found in section numbering: [
      {
        type: 'section',
        expected: 4,
        actual: 1,
        previous: 'Article II, Section 3',
        next: 'Article III, Section 1'
      },
      {
        type: 'section',
        expected: 3,
        actual: 1,
        previous: 'Article III, Section 2',
        next: 'Article V, Section 1'
      },
      {
        type: 'section',
        expected: 12,
        actual: 1,
        previous: 'Article V, Section 11',
        next: 'Article VI, Section 1'
      },
      {
        type: 'section',
        expected: 5,
        actual: 1,
        previous: 'Article VI, Section 4',
        next: 'Article VII, Section 1'
      },
      {
        type: 'section',
        expected: 4,
        actual: 1,
        previous: 'Article VII, Section 3',
        next: 'Article VIII, Section 1'
      },
      {
        type: 'section',
        expected: 5,
        actual: 1,
        previous: 'Article VIII, Section 4',
        next: 'Article X, Section 1'
      },
      {
        type: 'section',
        expected: 7,
        actual: 1,
        previous: 'Article X, Section 6',
        next: 'Article XIV, Section 1'
      }
    ]

      at log (tests/integration/rnc-bylaws-parse.test.js:282:21)
          at Array.forEach (<anonymous>)

  console.log
    Document formatting:

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:294:15)

  console.log
      Bold: Yes

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:295:15)

  console.log
      Italic: Yes

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:296:15)

  console.log
      Underline: No

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:297:15)

  console.warn
    WARNING: 55270 characters after last section

      313 |
      314 |         if (remainingText.length > 100) {
    > 315 |           console.warn(`WARNING: ${remainingText.length} characters after last section`);
          |                   ^
      316 |           console.log('Preview:', remainingText.substring(0, 200) + '...');
      317 |         }
      318 |       }

      at Object.warn (tests/integration/rnc-bylaws-parse.test.js:315:19)

  console.log
    Preview: affiliation and inclusive in our operations including, but not limited to, the process of electing or selecting the Board of Directors, Officers, and committee members, as hereinafter set forth;
    
    
    
    To...

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:316:19)

  console.log
    Validation results:

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:329:15)

  console.log
      Valid: true

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:330:15)

  console.log
      Warnings: 0

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:331:15)

  console.log
      Errors: 0

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:332:15)

  console.log
    Empty sections found: 2

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:355:17)

  console.log
      Articles (organizational containers): Article VI, Article X

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:356:17)

  console.log
      Non-containers: none

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:357:17)

  console.log
    
    ======================================================================

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:444:15)

  console.log
    RNC BYLAWS PARSER - COMPLETENESS TEST REPORT

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:445:15)

  console.log
    ======================================================================

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:446:15)

  console.log
    
    DOCUMENT:

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:447:15)

  console.log
      File: setup-1759980041923-342199667.docx

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:448:15)

  console.log
    
    ORIGINAL DOCUMENT STATS:

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:449:15)

  console.log
      Total characters: 56,879

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:450:15)

  console.log
      Total words: 9,211

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:451:15)

  console.log
      Total lines: 1,123

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:452:15)

  console.log
    
    PARSED RESULT:

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:453:15)

  console.log
      Success: YES

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:454:15)

  console.log
      Total sections: 51

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:455:15)

  console.log
      Section types:

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:456:15)

  console.log
        preamble: 1

      at log (tests/integration/rnc-bylaws-parse.test.js:458:17)
          at Array.forEach (<anonymous>)

  console.log
        article: 14

      at log (tests/integration/rnc-bylaws-parse.test.js:458:17)
          at Array.forEach (<anonymous>)

  console.log
        section: 36

      at log (tests/integration/rnc-bylaws-parse.test.js:458:17)
          at Array.forEach (<anonymous>)

  console.log
      Total characters: 45,220

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:460:15)

  console.log
      Total words: 8,917

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:461:15)

  console.log
    
    COMPLETENESS:

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:462:15)

  console.log
      Word retention: 96.81%

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:463:15)

  console.log
      Character retention: 79.50%

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:464:15)

  console.log
    
    VALIDATION:

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:465:15)

  console.log
      Valid: YES

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:466:15)

  console.log
      Warnings: 0

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:467:15)

  console.log
      Errors: 0

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:468:15)

  console.log
    
    EDGE CASES:

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:469:15)

  console.log
      Empty sections: 2

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:470:15)

  console.log
      Missing titles: 0

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:471:15)

  console.log
      Duplicate citations: 0

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:472:15)

  console.log
    
    ======================================================================

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:473:15)

  console.log
    TEST CONCLUSION:

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:474:15)

  console.log
    ⚠️  ISSUES FOUND - See details above

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:486:17)

  console.log
    ======================================================================

      at Object.log (tests/integration/rnc-bylaws-parse.test.js:488:15)

PASS tests/integration/rnc-bylaws-parse.test.js (11.954 s)
  RNC Bylaws Parser - Completeness Test
    Document Loading
      ✓ should load the RNC bylaws document (21 ms)
      ✓ should extract raw text successfully
      ✓ should parse document without errors (1 ms)
    Content Completeness
      ✓ should capture all text content (word count comparison) (16 ms)
      ✓ should capture all character content (3 ms)
      ✓ should not have empty gaps between sections (2 ms)
    Hierarchy Detection
      ✓ should detect all articles (2 ms)
      ✓ should detect all sections
      ✓ should detect all subsections (1 ms)
      ✓ should detect all clause types (1 ms)
      ✓ all sections should have valid citations
      ✓ all sections should have titles (1 ms)
    Edge Cases
      ✓ should handle document intro (content before first section)
      ✓ should detect any skipped section numbers (1 ms)
      ✓ should handle special formatting (bold, italic, underline) (5 ms)
      ✓ should identify any content after last section (6 ms)
    Validation
      ✓ should pass all validation checks (3 ms)
      ✓ should have no empty sections (2 ms)
      ✓ should have no duplicate citations
    Test Report
      ✓ should generate comprehensive test report (25 ms)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:98:44)
        at Object.requireSetupComplete (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:52:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:98:44)
      at Object.requireSetupComplete (tests/setup/setup-middleware.test.js:52:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:98:44)
        at Object.requireSetupComplete (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:64:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:98:44)
      at Object.requireSetupComplete (tests/setup/setup-middleware.test.js:64:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:98:44)
        at Object.requireSetupComplete (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:75:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:98:44)
      at Object.requireSetupComplete (tests/setup/setup-middleware.test.js:75:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:98:44)
        at requireSetupComplete (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:89:17)
        at Array.forEach (<anonymous>)
        at Object.forEach (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:84:25)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:98:44)
      at requireSetupComplete (tests/setup/setup-middleware.test.js:89:17)
          at Array.forEach (<anonymous>)
      at Object.forEach (tests/setup/setup-middleware.test.js:84:25)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:98:44)
        at Object.requireSetupComplete (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:101:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:98:44)
      at Object.requireSetupComplete (tests/setup/setup-middleware.test.js:101:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:98:44)
        at Object.requireSetupComplete (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:112:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:98:44)
      at Object.requireSetupComplete (tests/setup/setup-middleware.test.js:112:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:114:44)
        at Object.preventSetupIfConfigured (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:125:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:114:44)
      at Object.preventSetupIfConfigured (tests/setup/setup-middleware.test.js:125:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:114:44)
        at Object.preventSetupIfConfigured (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:137:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:114:44)
      at Object.preventSetupIfConfigured (tests/setup/setup-middleware.test.js:137:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:114:44)
        at Object.preventSetupIfConfigured (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:148:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:114:44)
      at Object.preventSetupIfConfigured (tests/setup/setup-middleware.test.js:148:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:122:32)
        at Object.checkSetupStatus (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:166:34)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:122:32)
      at Object.checkSetupStatus (tests/setup/setup-middleware.test.js:166:34)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:122:32)
        at Object.checkSetupStatus (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:180:34)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:122:32)
      at Object.checkSetupStatus (tests/setup/setup-middleware.test.js:180:34)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:122:32)
        at Object.checkSetupStatus (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:194:34)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:122:32)
      at Object.checkSetupStatus (tests/setup/setup-middleware.test.js:194:34)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:122:32)
        at Object.checkSetupStatus (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:205:34)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:122:32)
      at Object.checkSetupStatus (tests/setup/setup-middleware.test.js:205:34)

/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:93
      return res.status(503).json({
                 ^

[TypeError: res.status is not a function]

Node.js v22.17.1
  console.error
    Error in isGlobalAdmin: TypeError: req.supabase.from(...).select(...).eq(...).eq is not a function
        at eq (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/globalAdmin.js:21:8)
        at isGlobalAdmin (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/globalAdmin.js:52:27)
        at Object.getAccessibleOrganizations (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/unit/roleAuth.test.js:333:26)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      31 |     return !!data;
      32 |   } catch (error) {
    > 33 |     console.error('Error in isGlobalAdmin:', error);
         |             ^
      34 |     return false;
      35 |   }
      36 | }

      at error (src/middleware/globalAdmin.js:33:13)
      at isGlobalAdmin (src/middleware/globalAdmin.js:52:27)
      at Object.getAccessibleOrganizations (tests/unit/roleAuth.test.js:333:26)

  console.error
    Error in isGlobalAdmin: TypeError: req.supabase.from(...).select(...).eq(...).eq is not a function
        at eq (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/globalAdmin.js:21:8)
        at isGlobalAdmin (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/globalAdmin.js:52:27)
        at Object.getAccessibleOrganizations (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/unit/roleAuth.test.js:415:26)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      31 |     return !!data;
      32 |   } catch (error) {
    > 33 |     console.error('Error in isGlobalAdmin:', error);
         |             ^
      34 |     return false;
      35 |   }
      36 | }

      at error (src/middleware/globalAdmin.js:33:13)
      at isGlobalAdmin (src/middleware/globalAdmin.js:52:27)
      at Object.getAccessibleOrganizations (tests/unit/roleAuth.test.js:415:26)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:98:44)
        at Object.requireSetupComplete (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:52:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:98:44)
      at Object.requireSetupComplete (tests/setup/setup-middleware.test.js:52:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:98:44)
        at Object.requireSetupComplete (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:64:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:98:44)
      at Object.requireSetupComplete (tests/setup/setup-middleware.test.js:64:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:98:44)
        at Object.requireSetupComplete (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:75:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:98:44)
      at Object.requireSetupComplete (tests/setup/setup-middleware.test.js:75:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:98:44)
        at requireSetupComplete (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:89:17)
        at Array.forEach (<anonymous>)
        at Object.forEach (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:84:25)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:98:44)
      at requireSetupComplete (tests/setup/setup-middleware.test.js:89:17)
          at Array.forEach (<anonymous>)
      at Object.forEach (tests/setup/setup-middleware.test.js:84:25)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:98:44)
        at Object.requireSetupComplete (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:101:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:98:44)
      at Object.requireSetupComplete (tests/setup/setup-middleware.test.js:101:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:98:44)
        at Object.requireSetupComplete (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:112:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:98:44)
      at Object.requireSetupComplete (tests/setup/setup-middleware.test.js:112:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:114:44)
        at Object.preventSetupIfConfigured (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:125:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:114:44)
      at Object.preventSetupIfConfigured (tests/setup/setup-middleware.test.js:125:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:114:44)
        at Object.preventSetupIfConfigured (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:137:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:114:44)
      at Object.preventSetupIfConfigured (tests/setup/setup-middleware.test.js:137:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:114:44)
        at Object.preventSetupIfConfigured (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:148:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:114:44)
      at Object.preventSetupIfConfigured (tests/setup/setup-middleware.test.js:148:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:122:32)
        at Object.checkSetupStatus (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:166:34)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:122:32)
      at Object.checkSetupStatus (tests/setup/setup-middleware.test.js:166:34)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:122:32)
        at Object.checkSetupStatus (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:180:34)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:122:32)
      at Object.checkSetupStatus (tests/setup/setup-middleware.test.js:180:34)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:122:32)
        at Object.checkSetupStatus (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:194:34)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:122:32)
      at Object.checkSetupStatus (tests/setup/setup-middleware.test.js:194:34)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:122:32)
        at Object.checkSetupStatus (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:205:34)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:122:32)
      at Object.checkSetupStatus (tests/setup/setup-middleware.test.js:205:34)

/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:93
      return res.status(503).json({
                 ^

[TypeError: res.status is not a function]

Node.js v22.17.1
  console.error
    Error in isGlobalAdmin: TypeError: req.supabase.from(...).select(...).eq(...).eq is not a function
        at eq (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/globalAdmin.js:21:8)
        at isGlobalAdmin (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/globalAdmin.js:52:27)
        at Object.getAccessibleOrganizations (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/unit/roleAuth.test.js:476:26)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      31 |     return !!data;
      32 |   } catch (error) {
    > 33 |     console.error('Error in isGlobalAdmin:', error);
         |             ^
      34 |     return false;
      35 |   }
      36 | }

      at error (src/middleware/globalAdmin.js:33:13)
      at isGlobalAdmin (src/middleware/globalAdmin.js:52:27)
      at Object.getAccessibleOrganizations (tests/unit/roleAuth.test.js:476:26)

FAIL tests/unit/roleAuth.test.js (29.964 s)
  Role Authorization Tests
    isGlobalAdmin
      ✓ should return true for global admin user (3 ms)
      ✓ should return false for non-admin user (1 ms)
      ✕ should return false when no session exists (1 ms)
      ✕ should return false when userId is missing (1 ms)
      ✓ should handle database errors gracefully (19 ms)
    getAccessibleOrganizations
      ✓ should return all organizations for global admin (1 ms)
      ✕ should return only user organizations for regular user (5002 ms)
      ✕ should return empty array when no session
      ✕ should handle database errors gracefully (5003 ms)
    attachGlobalAdminStatus middleware
      ✕ should attach admin status and organizations to request (5008 ms)
      ✓ should set defaults when no session exists (1 ms)
    requireGlobalAdmin middleware
      ✓ should allow access for global admin (1 ms)
      ✓ should deny access for non-admin user (1 ms)
      ✓ should deny access when isGlobalAdmin is undefined
    Permission Boundary Tests
      ✓ should prevent privilege escalation (1 ms)
      ✕ should enforce organization access control (2744 ms)
      ✓ should validate admin status on every request (1 ms)
    Role-Based Access Control
      ✕ should differentiate between admin and member roles (5002 ms)
      ✕ should handle multiple roles across organizations (5141 ms)

  ● Role Authorization Tests › isGlobalAdmin › should return false when no session exists

    ReferenceError: createMockSupabase is not defined

      50 |       const req = {
      51 |         session: null,
    > 52 |         supabase: createMockSupabase(false)
         |                   ^
      53 |       };
      54 |
      55 |       const result = await isGlobalAdmin(req);

      at Object.createMockSupabase (tests/unit/roleAuth.test.js:52:19)

  ● Role Authorization Tests › isGlobalAdmin › should return false when userId is missing

    ReferenceError: createMockSupabase is not defined

      60 |       const req = {
      61 |         session: {},
    > 62 |         supabase: createMockSupabase(false)
         |                   ^
      63 |       };
      64 |
      65 |       const result = await isGlobalAdmin(req);

      at Object.createMockSupabase (tests/unit/roleAuth.test.js:62:19)

  ● Role Authorization Tests › getAccessibleOrganizations › should return only user organizations for regular user

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      115 |     });
      116 |
    > 117 |     test('should return only user organizations for regular user', async () => {
          |     ^
      118 |       const mockSupabase = createSupabaseMock();
      119 |
      120 |       // Mock isGlobalAdmin check to return false

      at test (tests/unit/roleAuth.test.js:117:5)
      at describe (tests/unit/roleAuth.test.js:86:3)
      at Object.describe (tests/unit/roleAuth.test.js:15:1)

  ● Role Authorization Tests › getAccessibleOrganizations › should return empty array when no session

    ReferenceError: createMockSupabase is not defined

      157 |       const req = {
      158 |         session: null,
    > 159 |         supabase: createMockSupabase(false)
          |                   ^
      160 |       };
      161 |
      162 |       const result = await getAccessibleOrganizations(req);

      at Object.createMockSupabase (tests/unit/roleAuth.test.js:159:19)

  ● Role Authorization Tests › getAccessibleOrganizations › should handle database errors gracefully

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      164 |     });
      165 |
    > 166 |     test('should handle database errors gracefully', async () => {
          |     ^
      167 |       const mockSupabase = createSupabaseMock();
      168 |       // Mock order() to return error
      169 |       mockSupabase.order = jest.fn().mockResolvedValue({

      at test (tests/unit/roleAuth.test.js:166:5)
      at describe (tests/unit/roleAuth.test.js:86:3)
      at Object.describe (tests/unit/roleAuth.test.js:15:1)

  ● Role Authorization Tests › attachGlobalAdminStatus middleware › should attach admin status and organizations to request

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      183 |
      184 |   describe('attachGlobalAdminStatus middleware', () => {
    > 185 |     test('should attach admin status and organizations to request', async () => {
          |     ^
      186 |       const mockOrgs = [
      187 |         { id: '1', name: 'Org A', slug: 'org-a', organization_type: 'council' }
      188 |       ];

      at test (tests/unit/roleAuth.test.js:185:5)
      at describe (tests/unit/roleAuth.test.js:184:3)
      at Object.describe (tests/unit/roleAuth.test.js:15:1)

  ● Role Authorization Tests › Permission Boundary Tests › should enforce organization access control

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      301 |     });
      302 |
    > 303 |     test('should enforce organization access control', async () => {
          |     ^
      304 |       const mockSupabase = createSupabaseMock();
      305 |
      306 |       // Mock isGlobalAdmin check to return false

      at test (tests/unit/roleAuth.test.js:303:5)
      at describe (tests/unit/roleAuth.test.js:281:3)
      at Object.describe (tests/unit/roleAuth.test.js:15:1)

  ● Role Authorization Tests › Role-Based Access Control › should differentiate between admin and member roles

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      371 |
      372 |   describe('Role-Based Access Control', () => {
    > 373 |     test('should differentiate between admin and member roles', async () => {
          |     ^
      374 |       const mockSupabase = createSupabaseMock();
      375 |
      376 |       // Mock isGlobalAdmin check to return false

      at test (tests/unit/roleAuth.test.js:373:5)
      at describe (tests/unit/roleAuth.test.js:372:3)
      at Object.describe (tests/unit/roleAuth.test.js:15:1)

  ● Role Authorization Tests › Role-Based Access Control › should handle multiple roles across organizations

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      422 |     });
      423 |
    > 424 |     test('should handle multiple roles across organizations', async () => {
          |     ^
      425 |       const mockSupabase = createSupabaseMock();
      426 |
      427 |       // Mock isGlobalAdmin check to return false

      at test (tests/unit/roleAuth.test.js:424:5)
      at describe (tests/unit/roleAuth.test.js:372:3)
      at Object.describe (tests/unit/roleAuth.test.js:15:1)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:98:44)
        at Object.requireSetupComplete (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:52:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:98:44)
      at Object.requireSetupComplete (tests/setup/setup-middleware.test.js:52:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:98:44)
        at Object.requireSetupComplete (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:64:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:98:44)
      at Object.requireSetupComplete (tests/setup/setup-middleware.test.js:64:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:98:44)
        at Object.requireSetupComplete (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:75:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:98:44)
      at Object.requireSetupComplete (tests/setup/setup-middleware.test.js:75:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:98:44)
        at requireSetupComplete (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:89:17)
        at Array.forEach (<anonymous>)
        at Object.forEach (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:84:25)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:98:44)
      at requireSetupComplete (tests/setup/setup-middleware.test.js:89:17)
          at Array.forEach (<anonymous>)
      at Object.forEach (tests/setup/setup-middleware.test.js:84:25)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:98:44)
        at Object.requireSetupComplete (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:101:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:98:44)
      at Object.requireSetupComplete (tests/setup/setup-middleware.test.js:101:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:98:44)
        at Object.requireSetupComplete (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:112:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:98:44)
      at Object.requireSetupComplete (tests/setup/setup-middleware.test.js:112:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:114:44)
        at Object.preventSetupIfConfigured (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:125:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:114:44)
      at Object.preventSetupIfConfigured (tests/setup/setup-middleware.test.js:125:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:114:44)
        at Object.preventSetupIfConfigured (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:137:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:114:44)
      at Object.preventSetupIfConfigured (tests/setup/setup-middleware.test.js:137:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:114:44)
        at Object.preventSetupIfConfigured (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:148:13)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:114:44)
      at Object.preventSetupIfConfigured (tests/setup/setup-middleware.test.js:148:13)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:122:32)
        at Object.checkSetupStatus (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:166:34)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:122:32)
      at Object.checkSetupStatus (tests/setup/setup-middleware.test.js:166:34)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:122:32)
        at Object.checkSetupStatus (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:180:34)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:122:32)
      at Object.checkSetupStatus (tests/setup/setup-middleware.test.js:180:34)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:122:32)
        at Object.checkSetupStatus (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:194:34)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:122:32)
      at Object.checkSetupStatus (tests/setup/setup-middleware.test.js:194:34)

  console.error
    Error in checkConfiguration: TypeError: Cannot read properties of undefined (reading 'from')
        at SetupMiddleware.from [as checkConfiguration] (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:26:10)
        at checkConfiguration (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:122:32)
        at Object.checkSetupStatus (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/tests/setup/setup-middleware.test.js:205:34)
        at Promise.finally.completed (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at _runTestsForDescribeBlock (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:275:16)
        at runTest (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:343:7)
        at Object.worker (/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/node_modules/jest-runner/build/testWorker.js:497:12)

      39 |       return this.isConfigured;
      40 |     } catch (error) {
    > 41 |       console.error('Error in checkConfiguration:', error);
         |               ^
      42 |       this.isConfigured = false;
      43 |       return false;
      44 |     }

      at SetupMiddleware.error [as checkConfiguration] (src/middleware/setup-required.js:41:15)
      at checkConfiguration (src/middleware/setup-required.js:122:32)
      at Object.checkSetupStatus (tests/setup/setup-middleware.test.js:205:34)

/mnt/c/Users/mgall/OneDrive/Desktop/BYLAWSCOMMITTEE/BYLAWSTOOL_Generalized/src/middleware/setup-required.js:93
      return res.status(503).json({
                 ^

[TypeError: res.status is not a function]

Node.js v22.17.1
FAIL tests/setup/setup-middleware.test.js
  ● Test suite failed to run

    Jest worker encountered 4 child process exceptions, exceeding retry limit

      at ChildProcessWorker.initialize (node_modules/jest-worker/build/index.js:805:21)

FAIL tests/unit/dashboard.test.js (58.225 s)
  Dashboard Unit Tests
    Setup Status Check
      ✕ should detect configured organization (5037 ms)
      ✕ should detect unconfigured system (5045 ms)
      ✕ should handle database errors gracefully (5064 ms)
      ✓ should cache setup status in session (2 ms)
    Organization ID Filtering
      ✕ should filter sections by organization_id (5247 ms)
      ✕ should filter suggestions by organization_id (2780 ms)
      ✕ should prevent accessing other organization data (5117 ms)
    Dashboard Route Handler
      ✕ should render dashboard with organization data (5236 ms)
      ✓ should handle missing organization_id in session (2 ms)
      ✕ should handle database errors gracefully (5182 ms)
    Query Performance
      ✕ should use efficient queries with proper indexes (5008 ms)
      ✕ should limit query results appropriately (5011 ms)
    Error Handling
      ✓ should handle null organization_id (13 ms)
      ✓ should handle undefined session (1 ms)
      ✕ should handle malformed organization_id (2906 ms)
    Data Transformation
      ✓ should format sections for dashboard display (3 ms)
      ✓ should calculate section statistics (2 ms)
    Session Management
      ✓ should validate session before dashboard access (1 ms)
      ✓ should redirect to setup without session (3 ms)
      ✓ should cache organization config in session (1 ms)

  ● Dashboard Unit Tests › Setup Status Check › should detect configured organization

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      42 |
      43 |   describe('Setup Status Check', () => {
    > 44 |     test('should detect configured organization', async () => {
         |     ^
      45 |       mockSupabaseService.single.mockResolvedValue({
      46 |         data: { id: 'org-123', name: 'Test Org' },
      47 |         error: null

      at test (tests/unit/dashboard.test.js:44:5)
      at describe (tests/unit/dashboard.test.js:43:3)
      at Object.describe (tests/unit/dashboard.test.js:8:1)

  ● Dashboard Unit Tests › Setup Status Check › should detect unconfigured system

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      64 |     });
      65 |
    > 66 |     test('should detect unconfigured system', async () => {
         |     ^
      67 |       mockSupabaseService.single.mockResolvedValue({
      68 |         data: null,
      69 |         error: null

      at test (tests/unit/dashboard.test.js:66:5)
      at describe (tests/unit/dashboard.test.js:43:3)
      at Object.describe (tests/unit/dashboard.test.js:8:1)

  ● Dashboard Unit Tests › Setup Status Check › should handle database errors gracefully

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      85 |     });
      86 |
    > 87 |     test('should handle database errors gracefully', async () => {
         |     ^
      88 |       mockSupabaseService.single.mockResolvedValue({
      89 |         data: null,
      90 |         error: { message: 'Connection failed' }

      at test (tests/unit/dashboard.test.js:87:5)
      at describe (tests/unit/dashboard.test.js:43:3)
      at Object.describe (tests/unit/dashboard.test.js:8:1)

  ● Dashboard Unit Tests › Organization ID Filtering › should filter sections by organization_id

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      129 |
      130 |   describe('Organization ID Filtering', () => {
    > 131 |     test('should filter sections by organization_id', async () => {
          |     ^
      132 |       const mockSections = [
      133 |         { id: '1', organization_id: 'org-123', section_citation: 'Article I' },
      134 |         { id: '2', organization_id: 'org-123', section_citation: 'Article II' }

      at test (tests/unit/dashboard.test.js:131:5)
      at describe (tests/unit/dashboard.test.js:130:3)
      at Object.describe (tests/unit/dashboard.test.js:8:1)

  ● Dashboard Unit Tests › Organization ID Filtering › should filter suggestions by organization_id

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      156 |     });
      157 |
    > 158 |     test('should filter suggestions by organization_id', async () => {
          |     ^
      159 |       mockSupabase.single.mockResolvedValue({
      160 |         data: [{ id: 'sug-1', organization_id: 'org-123' }],
      161 |         error: null

      at test (tests/unit/dashboard.test.js:158:5)
      at describe (tests/unit/dashboard.test.js:130:3)
      at Object.describe (tests/unit/dashboard.test.js:8:1)

  ● Dashboard Unit Tests › Organization ID Filtering › should prevent accessing other organization data

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      178 |     });
      179 |
    > 180 |     test('should prevent accessing other organization data', async () => {
          |     ^
      181 |       mockSupabase.single.mockResolvedValue({
      182 |         data: [], // RLS should return empty for other org
      183 |         error: null

      at test (tests/unit/dashboard.test.js:180:5)
      at describe (tests/unit/dashboard.test.js:130:3)
      at Object.describe (tests/unit/dashboard.test.js:8:1)

  ● Dashboard Unit Tests › Dashboard Route Handler › should render dashboard with organization data

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      201 |
      202 |   describe('Dashboard Route Handler', () => {
    > 203 |     test('should render dashboard with organization data', async () => {
          |     ^
      204 |       req.params.docId = 'doc-123';
      205 |
      206 |       mockSupabase.single.mockResolvedValue({

      at test (tests/unit/dashboard.test.js:203:5)
      at describe (tests/unit/dashboard.test.js:202:3)
      at Object.describe (tests/unit/dashboard.test.js:8:1)

  ● Dashboard Unit Tests › Dashboard Route Handler › should handle database errors gracefully

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      256 |     });
      257 |
    > 258 |     test('should handle database errors gracefully', async () => {
          |     ^
      259 |       mockSupabase.single.mockResolvedValue({
      260 |         data: null,
      261 |         error: { message: 'Database error' }

      at test (tests/unit/dashboard.test.js:258:5)
      at describe (tests/unit/dashboard.test.js:202:3)
      at Object.describe (tests/unit/dashboard.test.js:8:1)

  ● Dashboard Unit Tests › Query Performance › should use efficient queries with proper indexes

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      285 |
      286 |   describe('Query Performance', () => {
    > 287 |     test('should use efficient queries with proper indexes', async () => {
          |     ^
      288 |       const startTime = Date.now();
      289 |
      290 |       mockSupabase.single.mockResolvedValue({

      at test (tests/unit/dashboard.test.js:287:5)
      at describe (tests/unit/dashboard.test.js:286:3)
      at Object.describe (tests/unit/dashboard.test.js:8:1)

  ● Dashboard Unit Tests › Query Performance › should limit query results appropriately

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      314 |     });
      315 |
    > 316 |     test('should limit query results appropriately', async () => {
          |     ^
      317 |       const getRecentSections = async (supabase, organizationId, limit = 10) => {
      318 |         const { data, error } = await supabase
      319 |           .from('bylaw_sections')

      at test (tests/unit/dashboard.test.js:316:5)
      at describe (tests/unit/dashboard.test.js:286:3)
      at Object.describe (tests/unit/dashboard.test.js:8:1)

  ● Dashboard Unit Tests › Error Handling › should handle malformed organization_id

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      359 |     });
      360 |
    > 361 |     test('should handle malformed organization_id', async () => {
          |     ^
      362 |       req.session.organizationId = 'invalid-id-format';
      363 |
      364 |       mockSupabase.single.mockResolvedValue({

      at test (tests/unit/dashboard.test.js:361:5)
      at describe (tests/unit/dashboard.test.js:335:3)
      at Object.describe (tests/unit/dashboard.test.js:8:1)

FAIL tests/security/rls-dashboard.test.js (82.643 s)
  RLS Dashboard Security Tests
    Organization Data Isolation
      ✕ should enforce RLS on bylaw_sections (5050 ms)
      ✕ should block access to other organization sections (5003 ms)
      ✕ should enforce RLS on bylaw_suggestions (5062 ms)
      ✓ should enforce RLS on organizations table (2 ms)
      ✓ should prevent viewing other organization details (1 ms)
    Unauthorized Access Attempts
      ✕ should block INSERT without organization_id (2745 ms)
      ✕ should block INSERT with wrong organization_id (5006 ms)
      ✕ should block UPDATE of other organization data (5002 ms)
      ✕ should block DELETE of other organization data (5009 ms)
      ✕ should prevent SQL injection through organization_id (5010 ms)
    RLS Policy Enforcement
      ✕ should apply SELECT policy for authenticated users (5008 ms)
      ✓ should apply INSERT policy for authenticated users (2 ms)
      ✓ should apply UPDATE policy for authenticated users (1 ms)
      ✕ should apply DELETE policy for authenticated users (2735 ms)
    Service Role vs User Role
      ✕ service role should bypass RLS for all organizations (5008 ms)
      ✕ user role should only see own organization (5006 ms)
      ✓ service role should be used only for setup (3 ms)
      ✓ service role should not be exposed to client (2 ms)
    RLS Edge Cases
      ✕ should handle NULL organization_id (5003 ms)
      ✕ should handle concurrent transactions with RLS (5002 ms)
      ✕ should handle RLS with JOIN queries (5007 ms)
      ✕ should handle RLS with aggregate queries (1 ms)
    Security Best Practices
      ✓ should always include organization_id in WHERE clause (2 ms)
      ✓ should validate organization_id from session, not client (1 ms)
      ✕ should use prepared statements to prevent injection (5002 ms)
      ✓ should log security violations (2 ms)
      ✓ should rate limit suspicious activity (1 ms)

  ● RLS Dashboard Security Tests › Organization Data Isolation › should enforce RLS on bylaw_sections

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      19 |
      20 |   describe('Organization Data Isolation', () => {
    > 21 |     test('should enforce RLS on bylaw_sections', async () => {
         |     ^
      22 |       // User from org-1 queries sections
      23 |       mockSupabase.single.mockResolvedValue({
      24 |         data: [

      at test (tests/security/rls-dashboard.test.js:21:5)
      at describe (tests/security/rls-dashboard.test.js:20:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › Organization Data Isolation › should block access to other organization sections

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      37 |     });
      38 |
    > 39 |     test('should block access to other organization sections', async () => {
         |     ^
      40 |       // User from org-1 tries to access org-2 data
      41 |       mockSupabase.single.mockResolvedValue({
      42 |         data: [], // RLS should return empty

      at test (tests/security/rls-dashboard.test.js:39:5)
      at describe (tests/security/rls-dashboard.test.js:20:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › Organization Data Isolation › should enforce RLS on bylaw_suggestions

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      53 |     });
      54 |
    > 55 |     test('should enforce RLS on bylaw_suggestions', async () => {
         |     ^
      56 |       mockSupabase.single.mockResolvedValue({
      57 |         data: [
      58 |           { id: 'sug-1', organization_id: 'org-1', suggested_text: 'Suggestion' }

      at test (tests/security/rls-dashboard.test.js:55:5)
      at describe (tests/security/rls-dashboard.test.js:20:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › Unauthorized Access Attempts › should block INSERT without organization_id

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      106 |
      107 |   describe('Unauthorized Access Attempts', () => {
    > 108 |     test('should block INSERT without organization_id', async () => {
          |     ^
      109 |       mockSupabase.single.mockResolvedValue({
      110 |         data: null,
      111 |         error: { message: 'organization_id is required' }

      at test (tests/security/rls-dashboard.test.js:108:5)
      at describe (tests/security/rls-dashboard.test.js:107:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › Unauthorized Access Attempts › should block INSERT with wrong organization_id

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      124 |     });
      125 |
    > 126 |     test('should block INSERT with wrong organization_id', async () => {
          |     ^
      127 |       // User from org-1 tries to insert into org-2
      128 |       mockSupabase.single.mockResolvedValue({
      129 |         data: null,

      at test (tests/security/rls-dashboard.test.js:126:5)
      at describe (tests/security/rls-dashboard.test.js:107:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › Unauthorized Access Attempts › should block UPDATE of other organization data

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      142 |     });
      143 |
    > 144 |     test('should block UPDATE of other organization data', async () => {
          |     ^
      145 |       mockSupabase.single.mockResolvedValue({
      146 |         data: null,
      147 |         error: { message: 'No rows updated' }

      at test (tests/security/rls-dashboard.test.js:144:5)
      at describe (tests/security/rls-dashboard.test.js:107:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › Unauthorized Access Attempts › should block DELETE of other organization data

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      156 |     });
      157 |
    > 158 |     test('should block DELETE of other organization data', async () => {
          |     ^
      159 |       mockSupabase.single.mockResolvedValue({
      160 |         data: null,
      161 |         error: { message: 'No rows deleted' }

      at test (tests/security/rls-dashboard.test.js:158:5)
      at describe (tests/security/rls-dashboard.test.js:107:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › Unauthorized Access Attempts › should prevent SQL injection through organization_id

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      170 |     });
      171 |
    > 172 |     test('should prevent SQL injection through organization_id', async () => {
          |     ^
      173 |       const maliciousOrgId = "org-1' OR '1'='1";
      174 |
      175 |       mockSupabase.single.mockResolvedValue({

      at test (tests/security/rls-dashboard.test.js:172:5)
      at describe (tests/security/rls-dashboard.test.js:107:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › RLS Policy Enforcement › should apply SELECT policy for authenticated users

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      190 |
      191 |   describe('RLS Policy Enforcement', () => {
    > 192 |     test('should apply SELECT policy for authenticated users', async () => {
          |     ^
      193 |       // Policy: Users can only SELECT their own organization data
      194 |       mockSupabase.single.mockResolvedValue({
      195 |         data: [{ id: '1', organization_id: 'org-1' }],

      at test (tests/security/rls-dashboard.test.js:192:5)
      at describe (tests/security/rls-dashboard.test.js:191:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › RLS Policy Enforcement › should apply DELETE policy for authenticated users

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      267 |     });
      268 |
    > 269 |     test('should apply DELETE policy for authenticated users', async () => {
          |     ^
      270 |       // Policy: Users can only DELETE their own organization data
      271 |       mockSupabase.single.mockResolvedValue({
      272 |         data: null,

      at test (tests/security/rls-dashboard.test.js:269:5)
      at describe (tests/security/rls-dashboard.test.js:191:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › Service Role vs User Role › service role should bypass RLS for all organizations

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      291 |
      292 |   describe('Service Role vs User Role', () => {
    > 293 |     test('service role should bypass RLS for all organizations', async () => {
          |     ^
      294 |       // Service role can see all data
      295 |       mockSupabaseService.single.mockResolvedValue({
      296 |         data: [

      at test (tests/security/rls-dashboard.test.js:293:5)
      at describe (tests/security/rls-dashboard.test.js:292:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › Service Role vs User Role › user role should only see own organization

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      311 |     });
      312 |
    > 313 |     test('user role should only see own organization', async () => {
          |     ^
      314 |       // User sees only their org
      315 |       mockSupabase.single.mockResolvedValue({
      316 |         data: [

      at test (tests/security/rls-dashboard.test.js:313:5)
      at describe (tests/security/rls-dashboard.test.js:292:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › RLS Edge Cases › should handle NULL organization_id

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      373 |
      374 |   describe('RLS Edge Cases', () => {
    > 375 |     test('should handle NULL organization_id', async () => {
          |     ^
      376 |       mockSupabase.single.mockResolvedValue({
      377 |         data: [],
      378 |         error: null

      at test (tests/security/rls-dashboard.test.js:375:5)
      at describe (tests/security/rls-dashboard.test.js:374:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › RLS Edge Cases › should handle concurrent transactions with RLS

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      389 |     });
      390 |
    > 391 |     test('should handle concurrent transactions with RLS', async () => {
          |     ^
      392 |       // Simulate concurrent updates from different orgs
      393 |       const org1Update = mockSupabase.single.mockResolvedValue({
      394 |         data: { id: '1', organization_id: 'org-1' },

      at test (tests/security/rls-dashboard.test.js:391:5)
      at describe (tests/security/rls-dashboard.test.js:374:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › RLS Edge Cases › should handle RLS with JOIN queries

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      410 |     });
      411 |
    > 412 |     test('should handle RLS with JOIN queries', async () => {
          |     ^
      413 |       // Query sections with their suggestions (both tables have RLS)
      414 |       mockSupabase.single.mockResolvedValue({
      415 |         data: [{

      at test (tests/security/rls-dashboard.test.js:412:5)
      at describe (tests/security/rls-dashboard.test.js:374:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › RLS Edge Cases › should handle RLS with aggregate queries

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      437 |     test('should handle RLS with aggregate queries', async () => {
      438 |       // Count sections per organization
    > 439 |       mockSupabase.rpc.mockResolvedValue({
          |                        ^
      440 |         data: 5,
      441 |         error: null
      442 |       });

      at Object.mockResolvedValue (tests/security/rls-dashboard.test.js:439:24)

  ● RLS Dashboard Security Tests › Security Best Practices › should use prepared statements to prevent injection

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      479 |     });
      480 |
    > 481 |     test('should use prepared statements to prevent injection', async () => {
          |     ^
      482 |       const maliciousInput = "'; DROP TABLE bylaw_sections; --";
      483 |
      484 |       mockSupabase.single.mockResolvedValue({

      at test (tests/security/rls-dashboard.test.js:481:5)
      at describe (tests/security/rls-dashboard.test.js:453:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

Summary of all failing tests
FAIL tests/unit/multitenancy.test.js (6.301 s)
  ● Multi-Tenancy Tests › Organization Isolation › should isolate data between organizations

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 2
    Received array:  [{"created_at": 2025-10-14T00:10:51.636Z, "id": "sec-1760400651636", "organization_id": "org-1760400651636", "title": "Org 1 Section"}, {"created_at": 2025-10-14T00:10:51.636Z, "id": "sec-1760400651636", "organization_id": "org-1760400651636", "title": "Org 2 Section"}]

      93 |       const org2Sections = await db.getSectionsByOrg(org2.id);
      94 |
    > 95 |       expect(org1Sections).toHaveLength(1);
         |                            ^
      96 |       expect(org2Sections).toHaveLength(1);
      97 |       expect(org1Sections[0].title).toBe('Org 1 Section');
      98 |       expect(org2Sections[0].title).toBe('Org 2 Section');

      at Object.toHaveLength (tests/unit/multitenancy.test.js:95:28)

  ● Multi-Tenancy Tests › Organization Isolation › should prevent cross-organization data access

    expect(received).toHaveLength(expected)

    Expected length: 0
    Received length: 1
    Received array:  [{"created_at": 2025-10-14T00:10:51.649Z, "id": "sec-1760400651649", "organization_id": "org-1760400651649", "title": "Secret Section"}]

      107 |       const result = await db.crossOrgQuery(org1.id, org2.id);
      108 |
    > 109 |       expect(result.org1).toHaveLength(0);
          |                           ^
      110 |       expect(result.org2).toHaveLength(0); // RLS prevents access
      111 |     });
      112 |

      at Object.toHaveLength (tests/unit/multitenancy.test.js:109:27)

  ● Multi-Tenancy Tests › Concurrent Organization Usage › should handle multiple organizations simultaneously

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 3
    Received array:  [{"created_at": 2025-10-14T00:10:51.651Z, "id": "sec-1760400651651", "organization_id": "org-1760400651651", "title": "Org A Section"}, {"created_at": 2025-10-14T00:10:51.651Z, "id": "sec-1760400651651", "organization_id": "org-1760400651651", "title": "Org B Section"}, {"created_at": 2025-10-14T00:10:51.651Z, "id": "sec-1760400651651", "organization_id": "org-1760400651651", "title": "Org C Section"}]

      137 |       for (const org of orgs) {
      138 |         const sections = await db.getSectionsByOrg(org.id);
    > 139 |         expect(sections).toHaveLength(1);
          |                          ^
      140 |         expect(sections[0].title).toContain(org.name);
      141 |       }
      142 |     });

      at Object.toHaveLength (tests/unit/multitenancy.test.js:139:26)

  ● Multi-Tenancy Tests › Concurrent Organization Usage › should prevent data leaks during concurrent operations

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 4
    Received array:  [{"created_at": 2025-10-14T00:10:51.652Z, "id": "sec-1760400651652", "organization_id": "org-1760400651652", "title": "Section 1"}, {"created_at": 2025-10-14T00:10:51.652Z, "id": "sec-1760400651652", "organization_id": "org-1760400651652", "title": "Section 2"}, {"created_at": 2025-10-14T00:10:51.652Z, "id": "sec-1760400651652", "organization_id": "org-1760400651652", "title": "Section A"}, {"created_at": 2025-10-14T00:10:51.652Z, "id": "sec-1760400651652", "organization_id": "org-1760400651652", "title": "Section B"}]

      157 |       const org2Sections = await db.getSectionsByOrg(org2.id);
      158 |
    > 159 |       expect(org1Sections).toHaveLength(2);
          |                            ^
      160 |       expect(org2Sections).toHaveLength(2);
      161 |
      162 |       // Verify no cross-contamination

      at Object.toHaveLength (tests/unit/multitenancy.test.js:159:28)

  ● Multi-Tenancy Tests › Security Policies › should enforce row-level security

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 2
    Received array:  [{"created_at": 2025-10-14T00:10:51.659Z, "id": "sec-1760400651659", "organization_id": "org-1760400651659", "title": "Public Section"}, {"created_at": 2025-10-14T00:10:51.659Z, "id": "sec-1760400651659", "organization_id": "org-1760400651659", "title": "Private Section"}]

      289 |       const visibleSections = await db.getSectionsByOrg(org1.id);
      290 |
    > 291 |       expect(visibleSections).toHaveLength(1);
          |                               ^
      292 |       expect(visibleSections[0].title).toBe('Public Section');
      293 |     });
      294 |

      at Object.toHaveLength (tests/unit/multitenancy.test.js:291:31)

  ● Multi-Tenancy Tests › Security Policies › should prevent unauthorized data modification

    expect(received).not.toContain(expected) // indexOf

    Expected value: not {"created_at": 2025-10-14T00:10:51.660Z, "id": "sec-1760400651660", "organization_id": "org-1760400651660", "title": "Locked Section"}
    Received array:     [{"created_at": 2025-10-14T00:10:51.660Z, "id": "sec-1760400651660", "organization_id": "org-1760400651660", "title": "Locked Section"}]

      302 |       const org1Sections = await db.getSectionsByOrg(org1.id);
      303 |
    > 304 |       expect(org1Sections).not.toContain(section);
          |                                ^
      305 |     });
      306 |   });
      307 | });

      at Object.toContain (tests/unit/multitenancy.test.js:304:32)

FAIL tests/integration/api.test.js (6.548 s)
  ● API Integration Tests › Multi-Section API › should fetch suggestions for multiple sections

    TypeError: Cannot read properties of undefined (reading 'full_coverage')

      152 |
      153 |       expect(response.data.success).toBe(true);
    > 154 |       expect(response.data.suggestions.full_coverage).toHaveLength(1);
          |                                        ^
      155 |     });
      156 |   });
      157 |

      at Object.full_coverage (tests/integration/api.test.js:154:40)

FAIL tests/integration/dashboard-flow.test.js (7.542 s)
  ● Multi-Tenancy Tests › Organization Isolation › should isolate data between organizations

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 2
    Received array:  [{"created_at": 2025-10-14T00:10:52.467Z, "id": "sec-1760400652467", "organization_id": "org-1760400652467", "title": "Org 1 Section"}, {"created_at": 2025-10-14T00:10:52.467Z, "id": "sec-1760400652467", "organization_id": "org-1760400652467", "title": "Org 2 Section"}]

      93 |       const org2Sections = await db.getSectionsByOrg(org2.id);
      94 |
    > 95 |       expect(org1Sections).toHaveLength(1);
         |                            ^
      96 |       expect(org2Sections).toHaveLength(1);
      97 |       expect(org1Sections[0].title).toBe('Org 1 Section');
      98 |       expect(org2Sections[0].title).toBe('Org 2 Section');

      at Object.toHaveLength (tests/unit/multitenancy.test.js:95:28)

  ● Multi-Tenancy Tests › Organization Isolation › should prevent cross-organization data access

    expect(received).toHaveLength(expected)

    Expected length: 0
    Received length: 1
    Received array:  [{"created_at": 2025-10-14T00:10:52.479Z, "id": "sec-1760400652479", "organization_id": "org-1760400652479", "title": "Secret Section"}]

      107 |       const result = await db.crossOrgQuery(org1.id, org2.id);
      108 |
    > 109 |       expect(result.org1).toHaveLength(0);
          |                           ^
      110 |       expect(result.org2).toHaveLength(0); // RLS prevents access
      111 |     });
      112 |

      at Object.toHaveLength (tests/unit/multitenancy.test.js:109:27)

  ● Multi-Tenancy Tests › Concurrent Organization Usage › should handle multiple organizations simultaneously

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 3
    Received array:  [{"created_at": 2025-10-14T00:10:52.480Z, "id": "sec-1760400652480", "organization_id": "org-1760400652480", "title": "Org A Section"}, {"created_at": 2025-10-14T00:10:52.480Z, "id": "sec-1760400652480", "organization_id": "org-1760400652480", "title": "Org B Section"}, {"created_at": 2025-10-14T00:10:52.480Z, "id": "sec-1760400652480", "organization_id": "org-1760400652480", "title": "Org C Section"}]

      137 |       for (const org of orgs) {
      138 |         const sections = await db.getSectionsByOrg(org.id);
    > 139 |         expect(sections).toHaveLength(1);
          |                          ^
      140 |         expect(sections[0].title).toContain(org.name);
      141 |       }
      142 |     });

      at Object.toHaveLength (tests/unit/multitenancy.test.js:139:26)

  ● Multi-Tenancy Tests › Concurrent Organization Usage › should prevent data leaks during concurrent operations

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 4
    Received array:  [{"created_at": 2025-10-14T00:10:52.481Z, "id": "sec-1760400652481", "organization_id": "org-1760400652481", "title": "Section 1"}, {"created_at": 2025-10-14T00:10:52.481Z, "id": "sec-1760400652481", "organization_id": "org-1760400652481", "title": "Section 2"}, {"created_at": 2025-10-14T00:10:52.481Z, "id": "sec-1760400652481", "organization_id": "org-1760400652481", "title": "Section A"}, {"created_at": 2025-10-14T00:10:52.481Z, "id": "sec-1760400652481", "organization_id": "org-1760400652481", "title": "Section B"}]

      157 |       const org2Sections = await db.getSectionsByOrg(org2.id);
      158 |
    > 159 |       expect(org1Sections).toHaveLength(2);
          |                            ^
      160 |       expect(org2Sections).toHaveLength(2);
      161 |
      162 |       // Verify no cross-contamination

      at Object.toHaveLength (tests/unit/multitenancy.test.js:159:28)

  ● Multi-Tenancy Tests › Security Policies › should enforce row-level security

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 2
    Received array:  [{"created_at": 2025-10-14T00:10:52.492Z, "id": "sec-1760400652492", "organization_id": "org-1760400652492", "title": "Public Section"}, {"created_at": 2025-10-14T00:10:52.492Z, "id": "sec-1760400652492", "organization_id": "org-1760400652492", "title": "Private Section"}]

      289 |       const visibleSections = await db.getSectionsByOrg(org1.id);
      290 |
    > 291 |       expect(visibleSections).toHaveLength(1);
          |                               ^
      292 |       expect(visibleSections[0].title).toBe('Public Section');
      293 |     });
      294 |

      at Object.toHaveLength (tests/unit/multitenancy.test.js:291:31)

  ● Multi-Tenancy Tests › Security Policies › should prevent unauthorized data modification

    expect(received).not.toContain(expected) // indexOf

    Expected value: not {"created_at": 2025-10-14T00:10:52.493Z, "id": "sec-1760400652493", "organization_id": "org-1760400652493", "title": "Locked Section"}
    Received array:     [{"created_at": 2025-10-14T00:10:52.493Z, "id": "sec-1760400652493", "organization_id": "org-1760400652493", "title": "Locked Section"}]

      302 |       const org1Sections = await db.getSectionsByOrg(org1.id);
      303 |
    > 304 |       expect(org1Sections).not.toContain(section);
          |                                ^
      305 |     });
      306 |   });
      307 | });

      at Object.toContain (tests/unit/multitenancy.test.js:304:32)

  ● Dashboard Flow Integration Tests › Multi-Tenant Data Isolation › should isolate data between concurrent users

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 2
    Received array:  [{"created_at": 2025-10-14T00:10:52.498Z, "id": "sec-1760400652498", "organization_id": "org-1760400652498", "section_title": "Org 1 Section"}, {"created_at": 2025-10-14T00:10:52.498Z, "id": "sec-1760400652498", "organization_id": "org-1760400652498", "section_title": "Org 2 Section"}]

      185 |       const org2Sections = await db.getSectionsByOrg(session2.organizationId);
      186 |
    > 187 |       expect(org1Sections).toHaveLength(1);
          |                            ^
      188 |       expect(org2Sections).toHaveLength(1);
      189 |       expect(org1Sections[0].section_title).toBe('Org 1 Section');
      190 |       expect(org2Sections[0].section_title).toBe('Org 2 Section');

      at Object.toHaveLength (tests/integration/dashboard-flow.test.js:187:28)

  ● Dashboard Flow Integration Tests › Dashboard API Endpoints › should fetch sections with organization filter

    TypeError: expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has value: undefined

      246 |
      247 |       expect(response.success).toBe(true);
    > 248 |       expect(response.sections).toHaveLength(2);
          |                                 ^
      249 |     });
      250 |
      251 |     test('should create suggestion with organization context', async () => {

      at Object.toHaveLength (tests/integration/dashboard-flow.test.js:248:33)

  ● Dashboard Flow Integration Tests › Error Recovery › should recover from database connection loss

    expect(received).toEqual(expected) // deep equality

    Expected: []
    Received: undefined

      365 |       const sections = await getSectionsWithRetry(mockSupabase, 'org-123', 1);
      366 |
    > 367 |       expect(sections).toEqual([]);
          |                        ^
      368 |     });
      369 |
      370 |     test('should handle partial data load failures', async () => {

      at Object.toEqual (tests/integration/dashboard-flow.test.js:367:24)

  ● Dashboard Flow Integration Tests › Performance and Scalability › should cache frequently accessed data

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      455 |
      456 |       // Should hit cache
    > 457 |       expect(cache.has('org-123')).toBe(true);
          |                                    ^
      458 |     });
      459 |   });
      460 | });

      at Object.toBe (tests/integration/dashboard-flow.test.js:457:36)

FAIL tests/performance/dashboard-performance.test.js (7.419 s)
  ● Dashboard Performance Tests › Large Dataset Handling › should handle bulk inserts efficiently

    TypeError: mockSupabase.from(...).insert is not a function

      368 |       await mockSupabase
      369 |         .from('bylaw_sections')
    > 370 |         .insert(bulkSections);
          |          ^
      371 |
      372 |       const duration = performance.now() - startTime;
      373 |

      at Object.insert (tests/performance/dashboard-performance.test.js:370:10)

FAIL tests/unit/parsers.test.js (8.217 s)
  ● Document Parser Tests › Article/Section Format (Traditional) › should handle multiple articles

    expect(received).toBe(expected) // Object.is equality

    Expected: "I"
    Received: "II"

      102 |
      103 |       expect(sections).toHaveLength(2);
    > 104 |       expect(sections[0].hierarchy.article.number).toBe('I');
          |                                                    ^
      105 |       expect(sections[1].hierarchy.article.number).toBe('II');
      106 |     });
      107 |

      at Object.toBe (tests/unit/parsers.test.js:104:52)

  ● Document Parser Tests › Edge Cases › should handle empty sections gracefully

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 1
    Received array:  [{"hierarchy": {"article": {"name": "TEST", "number": "I"}, "chapter": null, "section": {"number": "2", "title": "Has Content"}}, "text": "Some content here."}]

      175 |       const sections = parseDocumentHierarchy(content);
      176 |
    > 177 |       expect(sections).toHaveLength(2);
          |                        ^
      178 |       expect(sections[0].text).toBe('');
      179 |       expect(sections[1].text).toContain('content');
      180 |     });

      at Object.toHaveLength (tests/unit/parsers.test.js:177:24)

  ● Document Parser Tests › Edge Cases › should preserve whitespace within content

    expect(received).toContain(expected) // indexOf

    Expected substring: "  Indented"
    Received string:    "Indented text
        More indent
      Back to first level"

      203 |       const sections = parseDocumentHierarchy(content);
      204 |
    > 205 |       expect(sections[0].text).toContain('  Indented');
          |                                ^
      206 |       expect(sections[0].text).toContain('    More indent');
      207 |     });
      208 |

      at Object.toContain (tests/unit/parsers.test.js:205:32)

  ● Parser Performance › should parse large documents efficiently

    expect(received).toBe(expected) // Object.is equality

    Expected: 100
    Received: 101

      294 |     const duration = Date.now() - startTime;
      295 |
    > 296 |     expect(sections.length).toBe(100);
          |                             ^
      297 |     expect(duration).toBeLessThan(1000); // Should parse in < 1 second
      298 |   });
      299 | });

      at Object.toBe (tests/unit/parsers.test.js:296:29)

FAIL tests/success-redirect.test.js
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/index.js:1057:18)
      at node_modules/@jest/core/build/index.js:1127:165
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL tests/unit/dashboard-ui.test.js (8.918 s)
  ● Dashboard UI/UX Tests › User Interactions › should filter sections by search query

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 3
    Received array:  [{"section_citation": "Article I, Section 1", "section_title": "Purpose"}, {"section_citation": "Article I, Section 2", "section_title": "Boundaries"}, {"section_citation": "Article II, Section 1", "section_title": "Meetings"}]

      427 |       const result = filterSections(sections, 'article i');
      428 |
    > 429 |       expect(result).toHaveLength(2);
          |                      ^
      430 |       expect(result.every(s => s.section_citation.startsWith('Article I'))).toBe(true);
      431 |     });
      432 |

      at Object.toHaveLength (tests/unit/dashboard-ui.test.js:429:22)

FAIL tests/unit/deduplication.test.js (12.825 s)
  ● Section Deduplication › should keep original when duplicate has less content

    expect(received).toBe(expected) // Object.is equality

    - Expected  - 0
    + Received  + 2

      Original content with lots of text here
    +
    + Short

      68 |
      69 |     expect(deduplicated).toHaveLength(1);
    > 70 |     expect(deduplicated[0].text).toBe('Original content with lots of text here');
         |                                  ^
      71 |   });
      72 |
      73 |   test('should handle sections with no duplicates', () => {

      at Object.toBe (tests/unit/deduplication.test.js:70:34)

FAIL tests/setup-parser-integration.test.js (15.325 s)
  ● Setup Route Integration › setup route case statement is updated

    expect(received).toContain(expected) // indexOf

    Expected substring: "case 'import'"
    Received string:    "function router(req, res, next) {
        router.handle(req, res, next);
      }"

      88 |
      89 |     // Verify the import case has been updated
    > 90 |     expect(routeString).toContain('case \'import\'');
         |                         ^
      91 |     expect(routeString).toContain('setupService');
      92 |     expect(routeString).toContain('processDocumentImport');
      93 |   });

      at Object.toContain (tests/setup-parser-integration.test.js:90:25)

FAIL tests/setup/setup-routes.test.js (14.637 s)
  ● Setup Routes › Organization Setup › should validate organization name is required

    TypeError: expect(...).toContainMatch is not a function

      136 |
      137 |             expect(result.valid).toBe(false);
    > 138 |             expect(result.errors).toContainMatch(/organization name/i);
          |                                   ^
      139 |         });
      140 |
      141 |         test('should validate organization type is required', () => {

      at Object.toContainMatch (tests/setup/setup-routes.test.js:138:35)

  ● Setup Routes › Organization Setup › should validate organization type is required

    TypeError: expect(...).toContainMatch is not a function

      148 |
      149 |             expect(result.valid).toBe(false);
    > 150 |             expect(result.errors).toContainMatch(/organization type/i);
          |                                   ^
      151 |         });
      152 |
      153 |         test('should validate email format', () => {

      at Object.toContainMatch (tests/setup/setup-routes.test.js:150:35)

  ● Setup Routes › Organization Setup › should validate email format

    TypeError: expect(...).toContainMatch is not a function

      164 |
      165 |                 expect(result.valid).toBe(false);
    > 166 |                 expect(result.errors).toContainMatch(/email/i);
          |                                       ^
      167 |             });
      168 |         });
      169 |

      at toContainMatch (tests/setup/setup-routes.test.js:166:39)
          at Array.forEach (<anonymous>)
      at Object.forEach (tests/setup/setup-routes.test.js:156:27)

  ● Setup Routes › Document Structure Setup › should validate structure type is required

    TypeError: expect(...).toContainMatch is not a function

      205 |
      206 |             expect(result.valid).toBe(false);
    > 207 |             expect(result.errors).toContainMatch(/structure type/i);
          |                                   ^
      208 |         });
      209 |
      210 |         test('should validate structure type is one of allowed types', () => {

      at Object.toContainMatch (tests/setup/setup-routes.test.js:207:35)

  ● Setup Routes › Document Structure Setup › should validate structure type is one of allowed types

    TypeError: expect(...).toContainMatch is not a function

      216 |
      217 |             expect(result.valid).toBe(false);
    > 218 |             expect(result.errors).toContainMatch(/invalid/i);
          |                                   ^
      219 |         });
      220 |
      221 |         test('should accept valid structure types', () => {

      at Object.toContainMatch (tests/setup/setup-routes.test.js:218:35)

  ● Setup Routes › Workflow Configuration › should require at least one workflow stage

    TypeError: expect(...).toContainMatch is not a function

      257 |
      258 |             expect(result.valid).toBe(false);
    > 259 |             expect(result.errors).toContainMatch(/at least one/i);
          |                                   ^
      260 |         });
      261 |
      262 |         test('should enforce maximum of 5 stages', () => {

      at Object.toContainMatch (tests/setup/setup-routes.test.js:259:35)

  ● Setup Routes › Workflow Configuration › should enforce maximum of 5 stages

    TypeError: expect(...).toContainMatch is not a function

      276 |
      277 |             expect(result.valid).toBe(false);
    > 278 |             expect(result.errors).toContainMatch(/maximum/i);
          |                                   ^
      279 |         });
      280 |
      281 |         test('should validate each stage has a name', () => {

      at Object.toContainMatch (tests/setup/setup-routes.test.js:278:35)

  ● Setup Routes › Workflow Configuration › should validate each stage has a name

    TypeError: expect(...).toContainMatch is not a function

      290 |
      291 |             expect(result.valid).toBe(false);
    > 292 |             expect(result.errors).toContainMatch(/name/i);
          |                                   ^
      293 |         });
      294 |
      295 |         test('should validate each stage has approval type', () => {

      at Object.toContainMatch (tests/setup/setup-routes.test.js:292:35)

  ● Setup Routes › Workflow Configuration › should validate each stage has approval type

    TypeError: expect(...).toContainMatch is not a function

      304 |
      305 |             expect(result.valid).toBe(false);
    > 306 |             expect(result.errors).toContainMatch(/approval type/i);
          |                                   ^
      307 |         });
      308 |
      309 |         test('should validate approval type is valid', () => {

      at Object.toContainMatch (tests/setup/setup-routes.test.js:306:35)

  ● Setup Routes › Workflow Configuration › should validate approval type is valid

    TypeError: expect(...).toContainMatch is not a function

      318 |
      319 |             expect(result.valid).toBe(false);
    > 320 |             expect(result.errors).toContainMatch(/invalid/i);
          |                                   ^
      321 |         });
      322 |
      323 |         test('should validate vote threshold percentage for supermajority type', () => {

      at Object.toContainMatch (tests/setup/setup-routes.test.js:320:35)

  ● Setup Routes › Document Import › should validate file type

    TypeError: expect(...).toContainMatch is not a function

      390 |
      391 |             expect(result.valid).toBe(false);
    > 392 |             expect(result.errors).toContainMatch(/word/i);
          |                                   ^
      393 |         });
      394 |
      395 |         test('should validate file size', () => {

      at Object.toContainMatch (tests/setup/setup-routes.test.js:392:35)

  ● Setup Routes › Document Import › should validate file size

    TypeError: expect(...).toContainMatch is not a function

      402 |
      403 |             expect(result.valid).toBe(false);
    > 404 |             expect(result.errors).toContainMatch(/10mb/i);
          |                                   ^
      405 |         });
      406 |
      407 |         test('should accept valid Word document', () => {

      at Object.toContainMatch (tests/setup/setup-routes.test.js:404:35)

FAIL tests/unit/roleAuth.test.js (29.964 s)
  ● Role Authorization Tests › isGlobalAdmin › should return false when no session exists

    ReferenceError: createMockSupabase is not defined

      50 |       const req = {
      51 |         session: null,
    > 52 |         supabase: createMockSupabase(false)
         |                   ^
      53 |       };
      54 |
      55 |       const result = await isGlobalAdmin(req);

      at Object.createMockSupabase (tests/unit/roleAuth.test.js:52:19)

  ● Role Authorization Tests › isGlobalAdmin › should return false when userId is missing

    ReferenceError: createMockSupabase is not defined

      60 |       const req = {
      61 |         session: {},
    > 62 |         supabase: createMockSupabase(false)
         |                   ^
      63 |       };
      64 |
      65 |       const result = await isGlobalAdmin(req);

      at Object.createMockSupabase (tests/unit/roleAuth.test.js:62:19)

  ● Role Authorization Tests › getAccessibleOrganizations › should return only user organizations for regular user

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      115 |     });
      116 |
    > 117 |     test('should return only user organizations for regular user', async () => {
          |     ^
      118 |       const mockSupabase = createSupabaseMock();
      119 |
      120 |       // Mock isGlobalAdmin check to return false

      at test (tests/unit/roleAuth.test.js:117:5)
      at describe (tests/unit/roleAuth.test.js:86:3)
      at Object.describe (tests/unit/roleAuth.test.js:15:1)

  ● Role Authorization Tests › getAccessibleOrganizations › should return empty array when no session

    ReferenceError: createMockSupabase is not defined

      157 |       const req = {
      158 |         session: null,
    > 159 |         supabase: createMockSupabase(false)
          |                   ^
      160 |       };
      161 |
      162 |       const result = await getAccessibleOrganizations(req);

      at Object.createMockSupabase (tests/unit/roleAuth.test.js:159:19)

  ● Role Authorization Tests › getAccessibleOrganizations › should handle database errors gracefully

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      164 |     });
      165 |
    > 166 |     test('should handle database errors gracefully', async () => {
          |     ^
      167 |       const mockSupabase = createSupabaseMock();
      168 |       // Mock order() to return error
      169 |       mockSupabase.order = jest.fn().mockResolvedValue({

      at test (tests/unit/roleAuth.test.js:166:5)
      at describe (tests/unit/roleAuth.test.js:86:3)
      at Object.describe (tests/unit/roleAuth.test.js:15:1)

  ● Role Authorization Tests › attachGlobalAdminStatus middleware › should attach admin status and organizations to request

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      183 |
      184 |   describe('attachGlobalAdminStatus middleware', () => {
    > 185 |     test('should attach admin status and organizations to request', async () => {
          |     ^
      186 |       const mockOrgs = [
      187 |         { id: '1', name: 'Org A', slug: 'org-a', organization_type: 'council' }
      188 |       ];

      at test (tests/unit/roleAuth.test.js:185:5)
      at describe (tests/unit/roleAuth.test.js:184:3)
      at Object.describe (tests/unit/roleAuth.test.js:15:1)

  ● Role Authorization Tests › Permission Boundary Tests › should enforce organization access control

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      301 |     });
      302 |
    > 303 |     test('should enforce organization access control', async () => {
          |     ^
      304 |       const mockSupabase = createSupabaseMock();
      305 |
      306 |       // Mock isGlobalAdmin check to return false

      at test (tests/unit/roleAuth.test.js:303:5)
      at describe (tests/unit/roleAuth.test.js:281:3)
      at Object.describe (tests/unit/roleAuth.test.js:15:1)

  ● Role Authorization Tests › Role-Based Access Control › should differentiate between admin and member roles

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      371 |
      372 |   describe('Role-Based Access Control', () => {
    > 373 |     test('should differentiate between admin and member roles', async () => {
          |     ^
      374 |       const mockSupabase = createSupabaseMock();
      375 |
      376 |       // Mock isGlobalAdmin check to return false

      at test (tests/unit/roleAuth.test.js:373:5)
      at describe (tests/unit/roleAuth.test.js:372:3)
      at Object.describe (tests/unit/roleAuth.test.js:15:1)

  ● Role Authorization Tests › Role-Based Access Control › should handle multiple roles across organizations

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      422 |     });
      423 |
    > 424 |     test('should handle multiple roles across organizations', async () => {
          |     ^
      425 |       const mockSupabase = createSupabaseMock();
      426 |
      427 |       // Mock isGlobalAdmin check to return false

      at test (tests/unit/roleAuth.test.js:424:5)
      at describe (tests/unit/roleAuth.test.js:372:3)
      at Object.describe (tests/unit/roleAuth.test.js:15:1)

FAIL tests/setup/setup-middleware.test.js
  ● Test suite failed to run

    Jest worker encountered 4 child process exceptions, exceeding retry limit

      at ChildProcessWorker.initialize (node_modules/jest-worker/build/index.js:805:21)

FAIL tests/unit/dashboard.test.js (58.225 s)
  ● Dashboard Unit Tests › Setup Status Check › should detect configured organization

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      42 |
      43 |   describe('Setup Status Check', () => {
    > 44 |     test('should detect configured organization', async () => {
         |     ^
      45 |       mockSupabaseService.single.mockResolvedValue({
      46 |         data: { id: 'org-123', name: 'Test Org' },
      47 |         error: null

      at test (tests/unit/dashboard.test.js:44:5)
      at describe (tests/unit/dashboard.test.js:43:3)
      at Object.describe (tests/unit/dashboard.test.js:8:1)

  ● Dashboard Unit Tests › Setup Status Check › should detect unconfigured system

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      64 |     });
      65 |
    > 66 |     test('should detect unconfigured system', async () => {
         |     ^
      67 |       mockSupabaseService.single.mockResolvedValue({
      68 |         data: null,
      69 |         error: null

      at test (tests/unit/dashboard.test.js:66:5)
      at describe (tests/unit/dashboard.test.js:43:3)
      at Object.describe (tests/unit/dashboard.test.js:8:1)

  ● Dashboard Unit Tests › Setup Status Check › should handle database errors gracefully

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      85 |     });
      86 |
    > 87 |     test('should handle database errors gracefully', async () => {
         |     ^
      88 |       mockSupabaseService.single.mockResolvedValue({
      89 |         data: null,
      90 |         error: { message: 'Connection failed' }

      at test (tests/unit/dashboard.test.js:87:5)
      at describe (tests/unit/dashboard.test.js:43:3)
      at Object.describe (tests/unit/dashboard.test.js:8:1)

  ● Dashboard Unit Tests › Organization ID Filtering › should filter sections by organization_id

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      129 |
      130 |   describe('Organization ID Filtering', () => {
    > 131 |     test('should filter sections by organization_id', async () => {
          |     ^
      132 |       const mockSections = [
      133 |         { id: '1', organization_id: 'org-123', section_citation: 'Article I' },
      134 |         { id: '2', organization_id: 'org-123', section_citation: 'Article II' }

      at test (tests/unit/dashboard.test.js:131:5)
      at describe (tests/unit/dashboard.test.js:130:3)
      at Object.describe (tests/unit/dashboard.test.js:8:1)

  ● Dashboard Unit Tests › Organization ID Filtering › should filter suggestions by organization_id

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      156 |     });
      157 |
    > 158 |     test('should filter suggestions by organization_id', async () => {
          |     ^
      159 |       mockSupabase.single.mockResolvedValue({
      160 |         data: [{ id: 'sug-1', organization_id: 'org-123' }],
      161 |         error: null

      at test (tests/unit/dashboard.test.js:158:5)
      at describe (tests/unit/dashboard.test.js:130:3)
      at Object.describe (tests/unit/dashboard.test.js:8:1)

  ● Dashboard Unit Tests › Organization ID Filtering › should prevent accessing other organization data

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      178 |     });
      179 |
    > 180 |     test('should prevent accessing other organization data', async () => {
          |     ^
      181 |       mockSupabase.single.mockResolvedValue({
      182 |         data: [], // RLS should return empty for other org
      183 |         error: null

      at test (tests/unit/dashboard.test.js:180:5)
      at describe (tests/unit/dashboard.test.js:130:3)
      at Object.describe (tests/unit/dashboard.test.js:8:1)

  ● Dashboard Unit Tests › Dashboard Route Handler › should render dashboard with organization data

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      201 |
      202 |   describe('Dashboard Route Handler', () => {
    > 203 |     test('should render dashboard with organization data', async () => {
          |     ^
      204 |       req.params.docId = 'doc-123';
      205 |
      206 |       mockSupabase.single.mockResolvedValue({

      at test (tests/unit/dashboard.test.js:203:5)
      at describe (tests/unit/dashboard.test.js:202:3)
      at Object.describe (tests/unit/dashboard.test.js:8:1)

  ● Dashboard Unit Tests › Dashboard Route Handler › should handle database errors gracefully

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      256 |     });
      257 |
    > 258 |     test('should handle database errors gracefully', async () => {
          |     ^
      259 |       mockSupabase.single.mockResolvedValue({
      260 |         data: null,
      261 |         error: { message: 'Database error' }

      at test (tests/unit/dashboard.test.js:258:5)
      at describe (tests/unit/dashboard.test.js:202:3)
      at Object.describe (tests/unit/dashboard.test.js:8:1)

  ● Dashboard Unit Tests › Query Performance › should use efficient queries with proper indexes

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      285 |
      286 |   describe('Query Performance', () => {
    > 287 |     test('should use efficient queries with proper indexes', async () => {
          |     ^
      288 |       const startTime = Date.now();
      289 |
      290 |       mockSupabase.single.mockResolvedValue({

      at test (tests/unit/dashboard.test.js:287:5)
      at describe (tests/unit/dashboard.test.js:286:3)
      at Object.describe (tests/unit/dashboard.test.js:8:1)

  ● Dashboard Unit Tests › Query Performance › should limit query results appropriately

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      314 |     });
      315 |
    > 316 |     test('should limit query results appropriately', async () => {
          |     ^
      317 |       const getRecentSections = async (supabase, organizationId, limit = 10) => {
      318 |         const { data, error } = await supabase
      319 |           .from('bylaw_sections')

      at test (tests/unit/dashboard.test.js:316:5)
      at describe (tests/unit/dashboard.test.js:286:3)
      at Object.describe (tests/unit/dashboard.test.js:8:1)

  ● Dashboard Unit Tests › Error Handling › should handle malformed organization_id

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      359 |     });
      360 |
    > 361 |     test('should handle malformed organization_id', async () => {
          |     ^
      362 |       req.session.organizationId = 'invalid-id-format';
      363 |
      364 |       mockSupabase.single.mockResolvedValue({

      at test (tests/unit/dashboard.test.js:361:5)
      at describe (tests/unit/dashboard.test.js:335:3)
      at Object.describe (tests/unit/dashboard.test.js:8:1)

FAIL tests/security/rls-dashboard.test.js (82.643 s)
  ● RLS Dashboard Security Tests › Organization Data Isolation › should enforce RLS on bylaw_sections

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      19 |
      20 |   describe('Organization Data Isolation', () => {
    > 21 |     test('should enforce RLS on bylaw_sections', async () => {
         |     ^
      22 |       // User from org-1 queries sections
      23 |       mockSupabase.single.mockResolvedValue({
      24 |         data: [

      at test (tests/security/rls-dashboard.test.js:21:5)
      at describe (tests/security/rls-dashboard.test.js:20:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › Organization Data Isolation › should block access to other organization sections

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      37 |     });
      38 |
    > 39 |     test('should block access to other organization sections', async () => {
         |     ^
      40 |       // User from org-1 tries to access org-2 data
      41 |       mockSupabase.single.mockResolvedValue({
      42 |         data: [], // RLS should return empty

      at test (tests/security/rls-dashboard.test.js:39:5)
      at describe (tests/security/rls-dashboard.test.js:20:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › Organization Data Isolation › should enforce RLS on bylaw_suggestions

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      53 |     });
      54 |
    > 55 |     test('should enforce RLS on bylaw_suggestions', async () => {
         |     ^
      56 |       mockSupabase.single.mockResolvedValue({
      57 |         data: [
      58 |           { id: 'sug-1', organization_id: 'org-1', suggested_text: 'Suggestion' }

      at test (tests/security/rls-dashboard.test.js:55:5)
      at describe (tests/security/rls-dashboard.test.js:20:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › Unauthorized Access Attempts › should block INSERT without organization_id

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      106 |
      107 |   describe('Unauthorized Access Attempts', () => {
    > 108 |     test('should block INSERT without organization_id', async () => {
          |     ^
      109 |       mockSupabase.single.mockResolvedValue({
      110 |         data: null,
      111 |         error: { message: 'organization_id is required' }

      at test (tests/security/rls-dashboard.test.js:108:5)
      at describe (tests/security/rls-dashboard.test.js:107:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › Unauthorized Access Attempts › should block INSERT with wrong organization_id

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      124 |     });
      125 |
    > 126 |     test('should block INSERT with wrong organization_id', async () => {
          |     ^
      127 |       // User from org-1 tries to insert into org-2
      128 |       mockSupabase.single.mockResolvedValue({
      129 |         data: null,

      at test (tests/security/rls-dashboard.test.js:126:5)
      at describe (tests/security/rls-dashboard.test.js:107:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › Unauthorized Access Attempts › should block UPDATE of other organization data

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      142 |     });
      143 |
    > 144 |     test('should block UPDATE of other organization data', async () => {
          |     ^
      145 |       mockSupabase.single.mockResolvedValue({
      146 |         data: null,
      147 |         error: { message: 'No rows updated' }

      at test (tests/security/rls-dashboard.test.js:144:5)
      at describe (tests/security/rls-dashboard.test.js:107:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › Unauthorized Access Attempts › should block DELETE of other organization data

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      156 |     });
      157 |
    > 158 |     test('should block DELETE of other organization data', async () => {
          |     ^
      159 |       mockSupabase.single.mockResolvedValue({
      160 |         data: null,
      161 |         error: { message: 'No rows deleted' }

      at test (tests/security/rls-dashboard.test.js:158:5)
      at describe (tests/security/rls-dashboard.test.js:107:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › Unauthorized Access Attempts › should prevent SQL injection through organization_id

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      170 |     });
      171 |
    > 172 |     test('should prevent SQL injection through organization_id', async () => {
          |     ^
      173 |       const maliciousOrgId = "org-1' OR '1'='1";
      174 |
      175 |       mockSupabase.single.mockResolvedValue({

      at test (tests/security/rls-dashboard.test.js:172:5)
      at describe (tests/security/rls-dashboard.test.js:107:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › RLS Policy Enforcement › should apply SELECT policy for authenticated users

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      190 |
      191 |   describe('RLS Policy Enforcement', () => {
    > 192 |     test('should apply SELECT policy for authenticated users', async () => {
          |     ^
      193 |       // Policy: Users can only SELECT their own organization data
      194 |       mockSupabase.single.mockResolvedValue({
      195 |         data: [{ id: '1', organization_id: 'org-1' }],

      at test (tests/security/rls-dashboard.test.js:192:5)
      at describe (tests/security/rls-dashboard.test.js:191:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › RLS Policy Enforcement › should apply DELETE policy for authenticated users

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      267 |     });
      268 |
    > 269 |     test('should apply DELETE policy for authenticated users', async () => {
          |     ^
      270 |       // Policy: Users can only DELETE their own organization data
      271 |       mockSupabase.single.mockResolvedValue({
      272 |         data: null,

      at test (tests/security/rls-dashboard.test.js:269:5)
      at describe (tests/security/rls-dashboard.test.js:191:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › Service Role vs User Role › service role should bypass RLS for all organizations

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      291 |
      292 |   describe('Service Role vs User Role', () => {
    > 293 |     test('service role should bypass RLS for all organizations', async () => {
          |     ^
      294 |       // Service role can see all data
      295 |       mockSupabaseService.single.mockResolvedValue({
      296 |         data: [

      at test (tests/security/rls-dashboard.test.js:293:5)
      at describe (tests/security/rls-dashboard.test.js:292:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › Service Role vs User Role › user role should only see own organization

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      311 |     });
      312 |
    > 313 |     test('user role should only see own organization', async () => {
          |     ^
      314 |       // User sees only their org
      315 |       mockSupabase.single.mockResolvedValue({
      316 |         data: [

      at test (tests/security/rls-dashboard.test.js:313:5)
      at describe (tests/security/rls-dashboard.test.js:292:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › RLS Edge Cases › should handle NULL organization_id

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      373 |
      374 |   describe('RLS Edge Cases', () => {
    > 375 |     test('should handle NULL organization_id', async () => {
          |     ^
      376 |       mockSupabase.single.mockResolvedValue({
      377 |         data: [],
      378 |         error: null

      at test (tests/security/rls-dashboard.test.js:375:5)
      at describe (tests/security/rls-dashboard.test.js:374:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › RLS Edge Cases › should handle concurrent transactions with RLS

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      389 |     });
      390 |
    > 391 |     test('should handle concurrent transactions with RLS', async () => {
          |     ^
      392 |       // Simulate concurrent updates from different orgs
      393 |       const org1Update = mockSupabase.single.mockResolvedValue({
      394 |         data: { id: '1', organization_id: 'org-1' },

      at test (tests/security/rls-dashboard.test.js:391:5)
      at describe (tests/security/rls-dashboard.test.js:374:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › RLS Edge Cases › should handle RLS with JOIN queries

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      410 |     });
      411 |
    > 412 |     test('should handle RLS with JOIN queries', async () => {
          |     ^
      413 |       // Query sections with their suggestions (both tables have RLS)
      414 |       mockSupabase.single.mockResolvedValue({
      415 |         data: [{

      at test (tests/security/rls-dashboard.test.js:412:5)
      at describe (tests/security/rls-dashboard.test.js:374:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)

  ● RLS Dashboard Security Tests › RLS Edge Cases › should handle RLS with aggregate queries

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

      437 |     test('should handle RLS with aggregate queries', async () => {
      438 |       // Count sections per organization
    > 439 |       mockSupabase.rpc.mockResolvedValue({
          |                        ^
      440 |         data: 5,
      441 |         error: null
      442 |       });

      at Object.mockResolvedValue (tests/security/rls-dashboard.test.js:439:24)

  ● RLS Dashboard Security Tests › Security Best Practices › should use prepared statements to prevent injection

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      479 |     });
      480 |
    > 481 |     test('should use prepared statements to prevent injection', async () => {
          |     ^
      482 |       const maliciousInput = "'; DROP TABLE bylaw_sections; --";
      483 |
      484 |       mockSupabase.single.mockResolvedValue({

      at test (tests/security/rls-dashboard.test.js:481:5)
      at describe (tests/security/rls-dashboard.test.js:453:3)
      at Object.describe (tests/security/rls-dashboard.test.js:8:1)


Test Suites: 14 failed, 16 passed, 30 total
Tests:       74 failed, 3 skipped, 504 passed, 581 total
Snapshots:   0 total
Time:        90.675 s, estimated 91 s
Ran all test suites.
